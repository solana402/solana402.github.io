import{s as kl,a as Dt,g as Xt,r as Wl,c as Ul,P as _o}from"./index-CcwvxS_I.js";var qr={exports:{}},mo;function Er(){if(mo)return qr.exports;mo=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(m,R,L){return Function.prototype.apply.call(m,R,L)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:r=function(m){return Object.getOwnPropertyNames(m)};function n(I){console&&console.warn&&console.warn(I)}var i=Number.isNaN||function(m){return m!==m};function o(){o.init.call(this)}qr.exports=o,qr.exports.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");s=I}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||i(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function c(I){return I._maxListeners===void 0?o.defaultMaxListeners:I._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(m){for(var R=[],L=1;L<arguments.length;L++)R.push(arguments[L]);var P=m==="error",F=this._events;if(F!==void 0)P=P&&F.error===void 0;else if(!P)return!1;if(P){var k;if(R.length>0&&(k=R[0]),k instanceof Error)throw k;var j=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw j.context=k,j}var U=F[m];if(U===void 0)return!1;if(typeof U=="function")t(U,this,R);else for(var O=U.length,Q=x(U,O),L=0;L<O;++L)t(Q[L],this,R);return!0};function l(I,m,R,L){var P,F,k;if(a(R),F=I._events,F===void 0?(F=I._events=Object.create(null),I._eventsCount=0):(F.newListener!==void 0&&(I.emit("newListener",m,R.listener?R.listener:R),F=I._events),k=F[m]),k===void 0)k=F[m]=R,++I._eventsCount;else if(typeof k=="function"?k=F[m]=L?[R,k]:[k,R]:L?k.unshift(R):k.push(R),P=c(I),P>0&&k.length>P&&!k.warned){k.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=I,j.type=m,j.count=k.length,n(j)}return I}o.prototype.addListener=function(m,R){return l(this,m,R,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(m,R){return l(this,m,R,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(I,m,R){var L={fired:!1,wrapFn:void 0,target:I,type:m,listener:R},P=g.bind(L);return P.listener=R,L.wrapFn=P,P}o.prototype.once=function(m,R){return a(R),this.on(m,p(this,m,R)),this},o.prototype.prependOnceListener=function(m,R){return a(R),this.prependListener(m,p(this,m,R)),this},o.prototype.removeListener=function(m,R){var L,P,F,k,j;if(a(R),P=this._events,P===void 0)return this;if(L=P[m],L===void 0)return this;if(L===R||L.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete P[m],P.removeListener&&this.emit("removeListener",m,L.listener||R));else if(typeof L!="function"){for(F=-1,k=L.length-1;k>=0;k--)if(L[k]===R||L[k].listener===R){j=L[k].listener,F=k;break}if(F<0)return this;F===0?L.shift():h(L,F),L.length===1&&(P[m]=L[0]),P.removeListener!==void 0&&this.emit("removeListener",m,j||R)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(m){var R,L,P;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[m]),this;if(arguments.length===0){var F=Object.keys(L),k;for(P=0;P<F.length;++P)k=F[P],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=L[m],typeof R=="function")this.removeListener(m,R);else if(R!==void 0)for(P=R.length-1;P>=0;P--)this.removeListener(m,R[P]);return this};function A(I,m,R){var L=I._events;if(L===void 0)return[];var P=L[m];return P===void 0?[]:typeof P=="function"?R?[P.listener||P]:[P]:R?w(P):x(P,P.length)}o.prototype.listeners=function(m){return A(this,m,!0)},o.prototype.rawListeners=function(m){return A(this,m,!1)},o.listenerCount=function(I,m){return typeof I.listenerCount=="function"?I.listenerCount(m):E.call(I,m)},o.prototype.listenerCount=E;function E(I){var m=this._events;if(m!==void 0){var R=m[I];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function x(I,m){for(var R=new Array(m),L=0;L<m;++L)R[L]=I[L];return R}function h(I,m){for(;m+1<I.length;m++)I[m]=I[m+1];I.pop()}function w(I){for(var m=new Array(I.length),R=0;R<m.length;++R)m[R]=I[R].listener||I[R];return m}function y(I,m){return new Promise(function(R,L){function P(k){I.removeListener(m,F),L(k)}function F(){typeof I.removeListener=="function"&&I.removeListener("error",P),R([].slice.call(arguments))}v(I,m,F,{once:!0}),m!=="error"&&C(I,P,{once:!0})})}function C(I,m,R){typeof I.on=="function"&&v(I,"error",m,R)}function v(I,m,R,L){if(typeof I.on=="function")L.once?I.once(m,R):I.on(m,R);else if(typeof I.addEventListener=="function")I.addEventListener(m,function P(F){L.once&&I.removeEventListener(m,P),R(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return qr.exports}var Fl=Er(),js={},$i=kl.Buffer,vo=$i.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Hl(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function ql(e){var t=Hl(e);if(typeof t!="string"&&($i.isEncoding===vo||!vo(e)))throw new Error("Unknown encoding: "+e);return t||e}js.StringDecoder=Sr;function Sr(e){this.encoding=ql(e);var t;switch(this.encoding){case"utf16le":this.text=Zl,this.end=Jl,t=4;break;case"utf8":this.fillLast=Vl,t=4;break;case"base64":this.text=Xl,this.end=Ql,t=3;break;default:this.write=eu,this.end=tu;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=$i.allocUnsafe(t)}Sr.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Sr.prototype.end=Yl;Sr.prototype.text=Kl;Sr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Hn(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function zl(e,t,r){var n=t.length-1;if(n<r)return 0;var i=Hn(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=Hn(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=Hn(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Gl(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function Vl(e){var t=this.lastTotal-this.lastNeed,r=Gl(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Kl(e,t){var r=zl(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Yl(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function Zl(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Jl(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Xl(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Ql(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function eu(e){return e.toString(this.encoding)}function tu(e){return e&&e.length?this.write(e):""}function br(e){"@babel/helpers - typeof";return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(e)}function ru(e,t){if(br(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(br(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nu(e){var t=ru(e,"string");return br(t)=="symbol"?t:t+""}function K(e,t,r){return(t=nu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eo(Object(r),!0).forEach(function(n){K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eo(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var ks={exports:{}},qn={exports:{}};let iu=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let n=0;n<t.length;n++)r+=`    ${t[n].stack}
`;super(r),this.name="AggregateError",this.errors=t}};var he={AggregateError:iu,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},Ws={exports:{}},Us={format(e,...t){return e.replace(/%([sdifj])/g,function(...[r,n]){const i=t.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:ou,inspect:nn}=Us,{AggregateError:su}=he,au=globalThis.AggregateError||su,lu=Symbol("kIsNodeError"),uu=["string","function","number","object","Function","Object","boolean","bigint","symbol"],cu=/^([A-Z][a-z0-9]*)+$/,fu="__node_internal_",fn={};function Nt(e,t){if(!e)throw new fn.ERR_INTERNAL_ASSERTION(t)}function So(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function du(e,t,r){if(typeof t=="function")return Nt(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return Nt(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:ou(t,...r)}function Ee(e,t,r){r||(r=Error);class n extends r{constructor(...o){super(du(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[lu]=!0,fn[e]=n}function Ao(e){const t=fu+e.name;return Object.defineProperty(e,"name",{value:t}),e}function hu(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new au([t,e],t.message);return r.code=t.code,r}return e||t}let gu=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new fn.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};Ee("ERR_ASSERTION","%s",Error);Ee("ERR_INVALID_ARG_TYPE",(e,t,r)=>{Nt(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const i=[],o=[],s=[];for(const c of t)Nt(typeof c=="string","All expected entries have to be of type string"),uu.includes(c)?i.push(c.toLowerCase()):cu.test(c)?o.push(c):(Nt(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){const c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{const c=nn(r,{depth:-1});n+=`. Received ${c}`}}else{let c=nn(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);Ee("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=nn(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);Ee("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Ee("ERR_MISSING_ARGS",(...e)=>{Nt(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);Ee("ERR_OUT_OF_RANGE",(e,t,r)=>{Nt(t,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=So(String(r));else if(typeof r=="bigint"){n=String(r);const i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=So(n)),n+="n"}else n=nn(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);Ee("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ee("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ee("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ee("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ee("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ee("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ee("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ee("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ee("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ee("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ee("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Te={AbortError:gu,aggregateTwoErrors:Ao(hu),hideStackFrames:Ao,codes:fn},ur={exports:{}},Ro;function wr(){if(Ro)return ur.exports;Ro=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return ur.exports=e,ur.exports.AbortSignal=t,ur.exports.default=e,ur.exports}(function(e){const t=Dt,{format:r,inspect:n}=Us,{codes:{ERR_INVALID_ARG_TYPE:i}}=Te,{kResistStopPropagation:o,AggregateError:s,SymbolDispose:a}=he,c=globalThis.AbortSignal||wr().AbortSignal,l=globalThis.AbortController||wr().AbortController,g=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||t.Blob,A=typeof p<"u"?function(w){return w instanceof p}:function(w){return!1},E=(h,w)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new i(w,"AbortSignal",h)},x=(h,w)=>{if(typeof h!="function")throw new i(w,"Function",h)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(h){let w=!1;return function(...y){w||(w=!0,h.apply(this,y))}},createDeferredPromise:function(){let h,w;return{promise:new Promise((C,v)=>{h=C,w=v}),resolve:h,reject:w}},promisify(h){return new Promise((w,y)=>{h((C,...v)=>C?y(C):w(...v))})},debuglog(){return function(){}},format:r,inspect:n,types:{isAsyncFunction(h){return h instanceof g},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:A,deprecate(h,w){return h},addAbortListener:Er().addAbortListener||function(w,y){if(w===void 0)throw new i("signal","AbortSignal",w);E(w,"signal"),x(y,"listener");let C;return w.aborted?queueMicrotask(()=>y()):(w.addEventListener("abort",y,{__proto__:null,once:!0,[o]:!0}),C=()=>{w.removeEventListener("abort",y)}),{__proto__:null,[a](){var v;(v=C)===null||v===void 0||v()}}},AbortSignalAny:c.any||function(w){if(w.length===1)return w[0];const y=new l,C=()=>y.abort();return w.forEach(v=>{E(v,"signals"),v.addEventListener("abort",C,{once:!0})}),y.signal.addEventListener("abort",()=>{w.forEach(v=>v.removeEventListener("abort",C))},{once:!0}),y.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Ws);var Le=Ws.exports,ji={};const{ArrayIsArray:Fs,ArrayPrototypeIncludes:pu,ArrayPrototypeJoin:bu,ArrayPrototypeMap:wu,NumberIsInteger:ki,NumberIsNaN:ng,NumberMAX_SAFE_INTEGER:yu,NumberMIN_SAFE_INTEGER:_u,NumberParseInt:ig,ObjectPrototypeHasOwnProperty:mu,RegExpPrototypeExec:og,String:vu,StringPrototypeToUpperCase:sg,StringPrototypeTrim:ag}=he,{hideStackFrames:ke,codes:{ERR_SOCKET_BAD_PORT:lg,ERR_INVALID_ARG_TYPE:We,ERR_INVALID_ARG_VALUE:Hs,ERR_OUT_OF_RANGE:Kt,ERR_UNKNOWN_SIGNAL:ug}}=Te,{normalizeEncoding:cg}=Le,{isAsyncFunction:Eu,isArrayBufferView:Su}=Le.types,Au=ke((e,t,r=_u,n=yu)=>{if(typeof e!="number")throw new We(t,"number",e);if(!ki(e))throw new Kt(t,"an integer",e);if(e<r||e>n)throw new Kt(t,`>= ${r} && <= ${n}`,e)});ke((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new We(t,"number",e);if(!ki(e))throw new Kt(t,"an integer",e);if(e<r||e>n)throw new Kt(t,`>= ${r} && <= ${n}`,e)});ke((e,t,r=!1)=>{if(typeof e!="number")throw new We(t,"number",e);if(!ki(e))throw new Kt(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new Kt(t,`>= ${n} && <= ${i}`,e)});ke((e,t,r)=>{if(!pu(r,e)){const i="must be one of: "+bu(wu(r,o=>typeof o=="string"?`'${o}'`:vu(o)),", ");throw new Hs(t,e,i)}});function Ru(e,t){if(typeof e!="boolean")throw new We(t,"boolean",e)}function zn(e,t,r){return e==null||!mu(e,t)?r:e[t]}const Iu=ke((e,t,r=null)=>{const n=zn(r,"allowArray",!1),i=zn(r,"allowFunction",!1);if(!zn(r,"nullable",!1)&&e===null||!n&&Fs(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new We(t,"Object",e)});ke((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new We(t,"a dictionary",e)});ke((e,t,r=0)=>{if(!Fs(e))throw new We(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new Hs(t,e,n)}});ke((e,t="buffer")=>{if(!Su(e))throw new We(t,["Buffer","TypedArray","DataView"],e)});const Tu=ke((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new We(t,"AbortSignal",e)}),xu=ke((e,t)=>{if(typeof e!="function")throw new We(t,"Function",e)});ke((e,t)=>{if(typeof e!="function"||Eu(e))throw new We(t,"Function",e)});ke((e,t)=>{if(e!==void 0)throw new We(t,"undefined",e)});var Ar={validateBoolean:Ru,validateFunction:xu,validateInteger:Au,validateObject:Iu,validateAbortSignal:Tu},Wi={exports:{}},qs={exports:{}},be=qs.exports={},Ve,Ke;function pi(){throw new Error("setTimeout has not been defined")}function bi(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ve=setTimeout:Ve=pi}catch{Ve=pi}try{typeof clearTimeout=="function"?Ke=clearTimeout:Ke=bi}catch{Ke=bi}})();function zs(e){if(Ve===setTimeout)return setTimeout(e,0);if((Ve===pi||!Ve)&&setTimeout)return Ve=setTimeout,setTimeout(e,0);try{return Ve(e,0)}catch{try{return Ve.call(null,e,0)}catch{return Ve.call(this,e,0)}}}function Ou(e){if(Ke===clearTimeout)return clearTimeout(e);if((Ke===bi||!Ke)&&clearTimeout)return Ke=clearTimeout,clearTimeout(e);try{return Ke(e)}catch{try{return Ke.call(null,e)}catch{return Ke.call(this,e)}}}var st=[],qt=!1,Tt,Qr=-1;function Nu(){!qt||!Tt||(qt=!1,Tt.length?st=Tt.concat(st):Qr=-1,st.length&&Gs())}function Gs(){if(!qt){var e=zs(Nu);qt=!0;for(var t=st.length;t;){for(Tt=st,st=[];++Qr<t;)Tt&&Tt[Qr].run();Qr=-1,t=st.length}Tt=null,qt=!1,Ou(e)}}be.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];st.push(new Vs(e,t)),st.length===1&&!qt&&zs(Gs)};function Vs(e,t){this.fun=e,this.array=t}Vs.prototype.run=function(){this.fun.apply(null,this.array)};be.title="browser";be.browser=!0;be.env={};be.argv=[];be.version="";be.versions={};function ct(){}be.on=ct;be.addListener=ct;be.once=ct;be.off=ct;be.removeListener=ct;be.removeAllListeners=ct;be.emit=ct;be.prependListener=ct;be.prependOnceListener=ct;be.listeners=function(e){return[]};be.binding=function(e){throw new Error("process.binding is not supported")};be.cwd=function(){return"/"};be.chdir=function(e){throw new Error("process.chdir is not supported")};be.umask=function(){return 0};var Bt=qs.exports;const{SymbolAsyncIterator:Io,SymbolIterator:To,SymbolFor:$t}=he,Ks=$t("nodejs.stream.destroyed"),Cu=$t("nodejs.stream.errored"),xo=$t("nodejs.stream.readable"),Oo=$t("nodejs.stream.writable"),Lu=$t("nodejs.stream.disturbed"),Pu=$t("nodejs.webstream.isClosedPromise"),Mu=$t("nodejs.webstream.controllerErrorFunction");function Ui(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function dn(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function Du(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function Xe(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Ys(e){return!!(e&&!Xe(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function Zs(e){return!!(e&&!Xe(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Js(e){return!!(e&&!Xe(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function Bu(e){return Ys(e)||Zs(e)||Js(e)}function $u(e,t){return e==null?!1:t===!0?typeof e[Io]=="function":t===!1?typeof e[To]=="function":typeof e[Io]=="function"||typeof e[To]=="function"}function hn(e){if(!Xe(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[Ks]||n!=null&&n.destroyed)}function ju(e){if(!dn(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function ku(e,t){if(!dn(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function Xs(e,t){if(!Ui(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function Qs(e){return e&&e[xo]!=null?e[xo]:typeof(e==null?void 0:e.readable)!="boolean"?null:hn(e)?!1:Ui(e)&&e.readable&&!Xs(e)}function ea(e){return e&&e[Oo]!=null?e[Oo]:typeof(e==null?void 0:e.writable)!="boolean"?null:hn(e)?!1:dn(e)&&e.writable&&!ju(e)}function Wu(e,t){return Xe(e)?hn(e)?!0:!((t==null?void 0:t.readable)!==!1&&Qs(e)||(t==null?void 0:t.writable)!==!1&&ea(e)):null}function Uu(e){var t,r;return Xe(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function Fu(e){var t,r;return Xe(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function Hu(e){if(!Xe(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&ta(e)?e._closed:null}function ta(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function qu(e){return typeof e._sent100=="boolean"&&ta(e)}function zu(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function Gu(e){if(!Xe(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&qu(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Vu(e){var t;return!!(e&&((t=e[Lu])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function Ku(e){var t,r,n,i,o,s,a,c,l,g;return!!(e&&((t=(r=(n=(i=(o=(s=e[Cu])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(a=e._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=e._readableState)===null||l===void 0?void 0:l.errored)!==null&&t!==void 0?t:!((g=e._writableState)===null||g===void 0)&&g.errored))}var ft={isDestroyed:hn,kIsDestroyed:Ks,isDisturbed:Vu,isErrored:Ku,isReadable:Qs,kIsClosedPromise:Pu,kControllerErrorFunction:Mu,isClosed:Hu,isDuplexNodeStream:Du,isFinished:Wu,isIterable:$u,isReadableNodeStream:Ui,isReadableStream:Ys,isReadableFinished:Xs,isReadableErrored:Fu,isNodeStream:Xe,isWebStream:Bu,isWritable:ea,isWritableNodeStream:dn,isWritableStream:Zs,isWritableFinished:ku,isWritableErrored:Uu,isServerRequest:zu,willEmitClose:Gu,isTransformStream:Js};const pt=Bt,{AbortError:ra,codes:Yu}=Te,{ERR_INVALID_ARG_TYPE:Zu,ERR_STREAM_PREMATURE_CLOSE:No}=Yu,{kEmptyObject:wi,once:yi}=Le,{validateAbortSignal:Ju,validateFunction:Xu,validateObject:Qu,validateBoolean:ec}=Ar,{Promise:tc,PromisePrototypeThen:rc,SymbolDispose:na}=he,{isClosed:nc,isReadable:Co,isReadableNodeStream:Gn,isReadableStream:ic,isReadableFinished:Lo,isReadableErrored:Po,isWritable:Mo,isWritableNodeStream:Do,isWritableStream:oc,isWritableFinished:Bo,isWritableErrored:$o,isNodeStream:sc,willEmitClose:ac,kIsClosedPromise:lc}=ft;let zt;function uc(e){return e.setHeader&&typeof e.abort=="function"}const _i=()=>{};function ia(e,t,r){var n,i;if(arguments.length===2?(r=t,t=wi):t==null?t=wi:Qu(t,"options"),Xu(r,"callback"),Ju(t.signal,"options.signal"),r=yi(r),ic(e)||oc(e))return cc(e,t,r);if(!sc(e))throw new Zu("stream",["ReadableStream","WritableStream","Stream"],e);const o=(n=t.readable)!==null&&n!==void 0?n:Gn(e),s=(i=t.writable)!==null&&i!==void 0?i:Do(e),a=e._writableState,c=e._readableState,l=()=>{e.writable||A()};let g=ac(e)&&Gn(e)===o&&Do(e)===s,p=Bo(e,!1);const A=()=>{p=!0,e.destroyed&&(g=!1),!(g&&(!e.readable||o))&&(!o||E)&&r.call(e)};let E=Lo(e,!1);const x=()=>{E=!0,e.destroyed&&(g=!1),!(g&&(!e.writable||s))&&(!s||p)&&r.call(e)},h=m=>{r.call(e,m)};let w=nc(e);const y=()=>{w=!0;const m=$o(e)||Po(e);if(m&&typeof m!="boolean")return r.call(e,m);if(o&&!E&&Gn(e,!0)&&!Lo(e,!1))return r.call(e,new No);if(s&&!p&&!Bo(e,!1))return r.call(e,new No);r.call(e)},C=()=>{w=!0;const m=$o(e)||Po(e);if(m&&typeof m!="boolean")return r.call(e,m);r.call(e)},v=()=>{e.req.on("finish",A)};uc(e)?(e.on("complete",A),g||e.on("abort",y),e.req?v():e.on("request",v)):s&&!a&&(e.on("end",l),e.on("close",l)),!g&&typeof e.aborted=="boolean"&&e.on("aborted",y),e.on("end",x),e.on("finish",A),t.error!==!1&&e.on("error",h),e.on("close",y),w?pt.nextTick(y):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?g||pt.nextTick(C):(!o&&(!g||Co(e))&&(p||Mo(e)===!1)||!s&&(!g||Mo(e))&&(E||Co(e)===!1)||c&&e.req&&e.aborted)&&pt.nextTick(C);const I=()=>{r=_i,e.removeListener("aborted",y),e.removeListener("complete",A),e.removeListener("abort",y),e.removeListener("request",v),e.req&&e.req.removeListener("finish",A),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",A),e.removeListener("end",x),e.removeListener("error",h),e.removeListener("close",y)};if(t.signal&&!w){const m=()=>{const R=r;I(),R.call(e,new ra(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)pt.nextTick(m);else{zt=zt||Le.addAbortListener;const R=zt(t.signal,m),L=r;r=yi((...P)=>{R[na](),L.apply(e,P)})}}return I}function cc(e,t,r){let n=!1,i=_i;if(t.signal)if(i=()=>{n=!0,r.call(e,new ra(void 0,{cause:t.signal.reason}))},t.signal.aborted)pt.nextTick(i);else{zt=zt||Le.addAbortListener;const s=zt(t.signal,i),a=r;r=yi((...c)=>{s[na](),a.apply(e,c)})}const o=(...s)=>{n||pt.nextTick(()=>r.apply(e,s))};return rc(e[lc].promise,o,o),_i}function fc(e,t){var r;let n=!1;return t===null&&(t=wi),(r=t)!==null&&r!==void 0&&r.cleanup&&(ec(t.cleanup,"cleanup"),n=t.cleanup),new tc((i,o)=>{const s=ia(e,t,a=>{n&&s(),a?o(a):i()})})}Wi.exports=ia;Wi.exports.finished=fc;var _t=Wi.exports;const Ze=Bt,{aggregateTwoErrors:dc,codes:{ERR_MULTIPLE_CALLBACK:hc},AbortError:gc}=Te,{Symbol:oa}=he,{kIsDestroyed:pc,isDestroyed:bc,isFinished:wc,isServerRequest:yc}=ft,sa=oa("kDestroy"),mi=oa("kConstruct");function aa(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function _c(e,t){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(aa(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?jo(this,e,t):this.once(sa,function(o){jo(this,dc(o,e),t)}),this)}function jo(e,t,r){let n=!1;function i(o){if(n)return;n=!0;const s=e._readableState,a=e._writableState;aa(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Ze.nextTick(mc,e,o):Ze.nextTick(la,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function mc(e,t){vi(e,t),la(e)}function la(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function vi(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function vc(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Ei(e,t,r){const n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?Ze.nextTick(vi,e,t):vi(e,t))}function Ec(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(mi,t),!(e.listenerCount(mi)>1)&&Ze.nextTick(Sc,e)}function Sc(e){let t=!1;function r(n){if(t){Ei(e,n??new hc);return}t=!0;const i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(sa,n):n?Ei(e,n,!0):Ze.nextTick(Ac,e)}try{e._construct(n=>{Ze.nextTick(r,n)})}catch(n){Ze.nextTick(r,n)}}function Ac(e){e.emit(mi)}function ko(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function ua(e){e.emit("close")}function Rc(e,t){e.emit("error",t),Ze.nextTick(ua,e)}function Ic(e,t){!e||bc(e)||(!t&&!wc(e)&&(t=new gc),yc(e)?(e.socket=null,e.destroy(t)):ko(e)?e.abort():ko(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Ze.nextTick(Rc,e,t):Ze.nextTick(ua,e),e.destroyed||(e[pc]=!0))}var Qt={construct:Ec,destroyer:Ic,destroy:_c,undestroy:vc,errorOrDestroy:Ei};const{ArrayIsArray:Tc,ObjectSetPrototypeOf:ca}=he,{EventEmitter:gn}=Er();function pn(e){gn.call(this,e)}ca(pn.prototype,gn.prototype);ca(pn,gn);pn.prototype.pipe=function(e,t){const r=this;function n(g){e.writable&&e.write(g)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function c(g){l(),gn.listenerCount(this,"error")===0&&this.emit("error",g)}Si(r,"error",c),Si(e,"error",c);function l(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e};function Si(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Tc(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var Fi={Stream:pn,prependListener:Si},fa={exports:{}};(function(e){const{SymbolDispose:t}=he,{AbortError:r,codes:n}=Te,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=ft,a=_t,{ERR_INVALID_ARG_TYPE:c}=n;let l;const g=(p,A)=>{if(typeof p!="object"||!("aborted"in p))throw new c(A,"AbortSignal",p)};e.exports.addAbortSignal=function(A,E){if(g(A,"signal"),!i(E)&&!o(E))throw new c("stream",["ReadableStream","WritableStream","Stream"],E);return e.exports.addAbortSignalNoValidate(A,E)},e.exports.addAbortSignalNoValidate=function(p,A){if(typeof p!="object"||!("aborted"in p))return A;const E=i(A)?()=>{A.destroy(new r(void 0,{cause:p.reason}))}:()=>{A[s](new r(void 0,{cause:p.reason}))};if(p.aborted)E();else{l=l||Le.addAbortListener;const x=l(p,E);a(A,x[t])}return A}})(fa);var bn=fa.exports;const{StringPrototypeSlice:Wo,SymbolIterator:xc,TypedArrayPrototypeSet:zr,Uint8Array:Oc}=he,{Buffer:Vn}=Dt,{inspect:Nc}=Le;var Cc=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return Vn.alloc(0);const r=Vn.allocUnsafe(t>>>0);let n=this.head,i=0;for(;n;)zr(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[xc](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,i=0;do{const o=n.data;if(t>o.length)r+=o,t-=o.length;else{t===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Wo(o,0,t),this.head=n,n.data=Wo(o,t));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){const r=Vn.allocUnsafe(t),n=t;let i=this.head,o=0;do{const s=i.data;if(t>s.length)zr(r,s,n-t),t-=s.length;else{t===s.length?(zr(r,s,n-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(zr(r,new Oc(s.buffer,s.byteOffset,t),n-t),this.head=i,i.data=s.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return Nc(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:Lc,NumberIsInteger:Pc}=he,{validateInteger:Mc}=Ar,{ERR_INVALID_ARG_VALUE:Dc}=Te.codes;let da=16*1024,ha=16;function Bc(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function ga(e){return e?ha:da}function $c(e,t){Mc(t,"value",0),e?ha=t:da=t}function jc(e,t,r,n){const i=Bc(t,n,r);if(i!=null){if(!Pc(i)||i<0){const o=n?`options.${r}`:"options.highWaterMark";throw new Dc(o,i)}return Lc(i)}return ga(e.objectMode)}var wn={getHighWaterMark:jc,getDefaultHighWaterMark:ga,setDefaultHighWaterMark:$c};const Uo=Bt,{PromisePrototypeThen:kc,SymbolAsyncIterator:Fo,SymbolIterator:Ho}=he,{Buffer:Wc}=Dt,{ERR_INVALID_ARG_TYPE:Uc,ERR_STREAM_NULL_VALUES:Fc}=Te.codes;function Hc(e,t,r){let n;if(typeof t=="string"||t instanceof Wc)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let i;if(t&&t[Fo])i=!0,n=t[Fo]();else if(t&&t[Ho])i=!1,n=t[Ho]();else throw new Uc("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(l,g){kc(a(l),()=>Uo.nextTick(g,l),p=>Uo.nextTick(g,p||l))};async function a(l){const g=l!=null,p=typeof n.throw=="function";if(g&&p){const{value:A,done:E}=await n.throw(l);if(await A,E)return}if(typeof n.return=="function"){const{value:A}=await n.return();await A}}async function c(){for(;;){try{const{value:l,done:g}=i?await n.next():n.next();if(g)o.push(null);else{const p=l&&typeof l.then=="function"?await l:l;if(p===null)throw s=!1,new Fc;if(o.push(p))continue;s=!1}}catch(l){o.destroy(l)}break}}return o}var pa=Hc,Kn,qo;function yn(){if(qo)return Kn;qo=1;const e=Bt,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:c,SafeSet:l,SymbolAsyncDispose:g,SymbolAsyncIterator:p,Symbol:A}=he;Kn=J,J.ReadableState=Pe;const{EventEmitter:E}=Er(),{Stream:x,prependListener:h}=Fi,{Buffer:w}=Dt,{addAbortSignal:y}=bn,C=_t;let v=Le.debuglog("stream",u=>{v=u});const I=Cc,m=Qt,{getHighWaterMark:R,getDefaultHighWaterMark:L}=wn,{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_OUT_OF_RANGE:j,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:O},AbortError:Q}=Te,{validateObject:N}=Ar,D=A("kPaused"),{StringDecoder:z}=js,Z=pa;a(J.prototype,x.prototype),a(J,x);const Y=()=>{},{errorOrDestroy:ee}=m,X=1,le=2,W=4,te=8,ge=16,we=32,ye=64,Se=128,Ae=256,xe=512,Ue=1024,Re=2048,_=4096,S=8192,M=16384,H=32768,V=65536,oe=1<<17,ce=1<<18;function ne(u){return{enumerable:!1,get(){return(this.state&u)!==0},set(d){d?this.state|=u:this.state&=~u}}}o(Pe.prototype,{objectMode:ne(X),ended:ne(le),endEmitted:ne(W),reading:ne(te),constructed:ne(ge),sync:ne(we),needReadable:ne(ye),emittedReadable:ne(Se),readableListening:ne(Ae),resumeScheduled:ne(xe),errorEmitted:ne(Ue),emitClose:ne(Re),autoDestroy:ne(_),destroyed:ne(S),closed:ne(M),closeEmitted:ne(H),multiAwaitDrain:ne(V),readingMore:ne(oe),dataEmitted:ne(ce)});function Pe(u,d,B){typeof B!="boolean"&&(B=d instanceof lt()),this.state=Re|_|ge|we,u&&u.objectMode&&(this.state|=X),B&&u&&u.readableObjectMode&&(this.state|=X),this.highWaterMark=u?R(this,u,"readableHighWaterMark",B):L(!1),this.buffer=new I,this.length=0,this.pipes=[],this.flowing=null,this[D]=null,u&&u.emitClose===!1&&(this.state&=~Re),u&&u.autoDestroy===!1&&(this.state&=~_),this.errored=null,this.defaultEncoding=u&&u.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,u&&u.encoding&&(this.decoder=new z(u.encoding),this.encoding=u.encoding)}function J(u){if(!(this instanceof J))return new J(u);const d=this instanceof lt();this._readableState=new Pe(u,this,d),u&&(typeof u.read=="function"&&(this._read=u.read),typeof u.destroy=="function"&&(this._destroy=u.destroy),typeof u.construct=="function"&&(this._construct=u.construct),u.signal&&!d&&y(u.signal,this)),x.call(this,u),m.construct(this,()=>{this._readableState.needReadable&&vt(this,this._readableState)})}J.prototype.destroy=m.destroy,J.prototype._undestroy=m.undestroy,J.prototype._destroy=function(u,d){d(u)},J.prototype[E.captureRejectionSymbol]=function(u){this.destroy(u)},J.prototype[g]=function(){let u;return this.destroyed||(u=this.readableEnded?null:new Q,this.destroy(u)),new c((d,B)=>C(this,$=>$&&$!==u?B($):d(null)))},J.prototype.push=function(u,d){return ve(this,u,d,!1)},J.prototype.unshift=function(u,d){return ve(this,u,d,!0)};function ve(u,d,B,$){v("readableAddChunk",d);const q=u._readableState;let _e;if(q.state&X||(typeof d=="string"?(B=B||q.defaultEncoding,q.encoding!==B&&($&&q.encoding?d=w.from(d,B).toString(q.encoding):(d=w.from(d,B),B=""))):d instanceof w?B="":x._isUint8Array(d)?(d=x._uint8ArrayToBuffer(d),B=""):d!=null&&(_e=new F("chunk",["string","Buffer","Uint8Array"],d))),_e)ee(u,_e);else if(d===null)q.state&=~te,Ut(u,q);else if(q.state&X||d&&d.length>0)if($)if(q.state&W)ee(u,new O);else{if(q.destroyed||q.errored)return!1;Wt(u,q,d,!0)}else if(q.ended)ee(u,new U);else{if(q.destroyed||q.errored)return!1;q.state&=~te,q.decoder&&!B?(d=q.decoder.write(d),q.objectMode||d.length!==0?Wt(u,q,d,!1):vt(u,q)):Wt(u,q,d,!1)}else $||(q.state&=~te,vt(u,q));return!q.ended&&(q.length<q.highWaterMark||q.length===0)}function Wt(u,d,B,$){d.flowing&&d.length===0&&!d.sync&&u.listenerCount("data")>0?(d.state&V?d.awaitDrainWriters.clear():d.awaitDrainWriters=null,d.dataEmitted=!0,u.emit("data",B)):(d.length+=d.objectMode?1:B.length,$?d.buffer.unshift(B):d.buffer.push(B),d.state&ye&&mt(u)),vt(u,d)}J.prototype.isPaused=function(){const u=this._readableState;return u[D]===!0||u.flowing===!1},J.prototype.setEncoding=function(u){const d=new z(u);this._readableState.decoder=d,this._readableState.encoding=this._readableState.decoder.encoding;const B=this._readableState.buffer;let $="";for(const q of B)$+=d.write(q);return B.clear(),$!==""&&B.push($),this._readableState.length=$.length,this};const Or=1073741824;function xn(u){if(u>Or)throw new j("size","<= 1GiB",u);return u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++,u}function Nr(u,d){return u<=0||d.length===0&&d.ended?0:d.state&X?1:n(u)?d.flowing&&d.length?d.buffer.first().length:d.length:u<=d.length?u:d.ended?d.length:0}J.prototype.read=function(u){v("read",u),u===void 0?u=NaN:r(u)||(u=i(u,10));const d=this._readableState,B=u;if(u>d.highWaterMark&&(d.highWaterMark=xn(u)),u!==0&&(d.state&=~Se),u===0&&d.needReadable&&((d.highWaterMark!==0?d.length>=d.highWaterMark:d.length>0)||d.ended))return v("read: emitReadable",d.length,d.ended),d.length===0&&d.ended?nr(this):mt(this),null;if(u=Nr(u,d),u===0&&d.ended)return d.length===0&&nr(this),null;let $=(d.state&ye)!==0;if(v("need readable",$),(d.length===0||d.length-u<d.highWaterMark)&&($=!0,v("length less than watermark",$)),d.ended||d.reading||d.destroyed||d.errored||!d.constructed)$=!1,v("reading, ended or constructing",$);else if($){v("do read"),d.state|=te|we,d.length===0&&(d.state|=ye);try{this._read(d.highWaterMark)}catch(_e){ee(this,_e)}d.state&=~we,d.reading||(u=Nr(B,d))}let q;return u>0?q=dt(u,d):q=null,q===null?(d.needReadable=d.length<=d.highWaterMark,u=0):(d.length-=u,d.multiAwaitDrain?d.awaitDrainWriters.clear():d.awaitDrainWriters=null),d.length===0&&(d.ended||(d.needReadable=!0),B!==u&&d.ended&&nr(this)),q!==null&&!d.errorEmitted&&!d.closeEmitted&&(d.dataEmitted=!0,this.emit("data",q)),q};function Ut(u,d){if(v("onEofChunk"),!d.ended){if(d.decoder){const B=d.decoder.end();B&&B.length&&(d.buffer.push(B),d.length+=d.objectMode?1:B.length)}d.ended=!0,d.sync?mt(u):(d.needReadable=!1,d.emittedReadable=!0,tr(u))}}function mt(u){const d=u._readableState;v("emitReadable",d.needReadable,d.emittedReadable),d.needReadable=!1,d.emittedReadable||(v("emitReadable",d.flowing),d.emittedReadable=!0,e.nextTick(tr,u))}function tr(u){const d=u._readableState;v("emitReadable_",d.destroyed,d.length,d.ended),!d.destroyed&&!d.errored&&(d.length||d.ended)&&(u.emit("readable"),d.emittedReadable=!1),d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark,rr(u)}function vt(u,d){!d.readingMore&&d.constructed&&(d.readingMore=!0,e.nextTick(Cr,u,d))}function Cr(u,d){for(;!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&d.length===0);){const B=d.length;if(v("maybeReadMore read 0"),u.read(0),B===d.length)break}d.readingMore=!1}J.prototype._read=function(u){throw new k("_read()")},J.prototype.pipe=function(u,d){const B=this,$=this._readableState;$.pipes.length===1&&($.multiAwaitDrain||($.multiAwaitDrain=!0,$.awaitDrainWriters=new l($.awaitDrainWriters?[$.awaitDrainWriters]:[]))),$.pipes.push(u),v("pipe count=%d opts=%j",$.pipes.length,d);const _e=(!d||d.end!==!1)&&u!==e.stdout&&u!==e.stderr?Br:Et;$.endEmitted?e.nextTick(_e):B.once("end",_e),u.on("unpipe",Oe);function Oe(tt,Fe){v("onunpipe"),tt===B&&Fe&&Fe.hasUnpiped===!1&&(Fe.hasUnpiped=!0,Ln())}function Br(){v("onend"),u.end()}let Ne,$r=!1;function Ln(){v("cleanup"),u.removeListener("close",ze),u.removeListener("finish",sr),Ne&&u.removeListener("drain",Ne),u.removeListener("error",or),u.removeListener("unpipe",Oe),B.removeListener("end",Br),B.removeListener("end",Et),B.removeListener("data",kr),$r=!0,Ne&&$.awaitDrainWriters&&(!u._writableState||u._writableState.needDrain)&&Ne()}function jr(){$r||($.pipes.length===1&&$.pipes[0]===u?(v("false write response, pause",0),$.awaitDrainWriters=u,$.multiAwaitDrain=!1):$.pipes.length>1&&$.pipes.includes(u)&&(v("false write response, pause",$.awaitDrainWriters.size),$.awaitDrainWriters.add(u)),B.pause()),Ne||(Ne=On(B,u),u.on("drain",Ne))}B.on("data",kr);function kr(tt){v("ondata");const Fe=u.write(tt);v("dest.write",Fe),Fe===!1&&jr()}function or(tt){if(v("onerror",tt),Et(),u.removeListener("error",or),u.listenerCount("error")===0){const Fe=u._writableState||u._readableState;Fe&&!Fe.errorEmitted?ee(u,tt):u.emit("error",tt)}}h(u,"error",or);function ze(){u.removeListener("finish",sr),Et()}u.once("close",ze);function sr(){v("onfinish"),u.removeListener("close",ze),Et()}u.once("finish",sr);function Et(){v("unpipe"),B.unpipe(u)}return u.emit("pipe",B),u.writableNeedDrain===!0?jr():$.flowing||(v("pipe resume"),B.resume()),u};function On(u,d){return function(){const $=u._readableState;$.awaitDrainWriters===d?(v("pipeOnDrain",1),$.awaitDrainWriters=null):$.multiAwaitDrain&&(v("pipeOnDrain",$.awaitDrainWriters.size),$.awaitDrainWriters.delete(d)),(!$.awaitDrainWriters||$.awaitDrainWriters.size===0)&&u.listenerCount("data")&&u.resume()}}J.prototype.unpipe=function(u){const d=this._readableState,B={hasUnpiped:!1};if(d.pipes.length===0)return this;if(!u){const q=d.pipes;d.pipes=[],this.pause();for(let _e=0;_e<q.length;_e++)q[_e].emit("unpipe",this,{hasUnpiped:!1});return this}const $=t(d.pipes,u);return $===-1?this:(d.pipes.splice($,1),d.pipes.length===0&&this.pause(),u.emit("unpipe",this,B),this)},J.prototype.on=function(u,d){const B=x.prototype.on.call(this,u,d),$=this._readableState;return u==="data"?($.readableListening=this.listenerCount("readable")>0,$.flowing!==!1&&this.resume()):u==="readable"&&!$.endEmitted&&!$.readableListening&&($.readableListening=$.needReadable=!0,$.flowing=!1,$.emittedReadable=!1,v("on readable",$.length,$.reading),$.length?mt(this):$.reading||e.nextTick(Qe,this)),B},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(u,d){const B=x.prototype.removeListener.call(this,u,d);return u==="readable"&&e.nextTick(Lr,this),B},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(u){const d=x.prototype.removeAllListeners.apply(this,arguments);return(u==="readable"||u===void 0)&&e.nextTick(Lr,this),d};function Lr(u){const d=u._readableState;d.readableListening=u.listenerCount("readable")>0,d.resumeScheduled&&d[D]===!1?d.flowing=!0:u.listenerCount("data")>0?u.resume():d.readableListening||(d.flowing=null)}function Qe(u){v("readable nexttick read 0"),u.read(0)}J.prototype.resume=function(){const u=this._readableState;return u.flowing||(v("resume"),u.flowing=!u.readableListening,Ft(this,u)),u[D]=!1,this};function Ft(u,d){d.resumeScheduled||(d.resumeScheduled=!0,e.nextTick(Nn,u,d))}function Nn(u,d){v("resume",d.reading),d.reading||u.read(0),d.resumeScheduled=!1,u.emit("resume"),rr(u),d.flowing&&!d.reading&&u.read(0)}J.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[D]=!0,this};function rr(u){const d=u._readableState;for(v("flow",d.flowing);d.flowing&&u.read()!==null;);}J.prototype.wrap=function(u){let d=!1;u.on("data",$=>{!this.push($)&&u.pause&&(d=!0,u.pause())}),u.on("end",()=>{this.push(null)}),u.on("error",$=>{ee(this,$)}),u.on("close",()=>{this.destroy()}),u.on("destroy",()=>{this.destroy()}),this._read=()=>{d&&u.resume&&(d=!1,u.resume())};const B=s(u);for(let $=1;$<B.length;$++){const q=B[$];this[q]===void 0&&typeof u[q]=="function"&&(this[q]=u[q].bind(u))}return this},J.prototype[p]=function(){return Pr(this)},J.prototype.iterator=function(u){return u!==void 0&&N(u,"options"),Pr(this,u)};function Pr(u,d){typeof u.read!="function"&&(u=J.wrap(u,{objectMode:!0}));const B=Mr(u,d);return B.stream=u,B}async function*Mr(u,d){let B=Y;function $(Oe){this===u?(B(),B=Y):B=Oe}u.on("readable",$);let q;const _e=C(u,{writable:!1},Oe=>{q=Oe?P(q,Oe):null,B(),B=Y});try{for(;;){const Oe=u.destroyed?null:u.read();if(Oe!==null)yield Oe;else{if(q)throw q;if(q===null)return;await new c($)}}}catch(Oe){throw q=P(q,Oe),q}finally{(q||(d==null?void 0:d.destroyOnReturn)!==!1)&&(q===void 0||u._readableState.autoDestroy)?m.destroyer(u,null):(u.off("readable",$),_e())}}o(J.prototype,{readable:{__proto__:null,get(){const u=this._readableState;return!!u&&u.readable!==!1&&!u.destroyed&&!u.errorEmitted&&!u.endEmitted},set(u){this._readableState&&(this._readableState.readable=!!u)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(u){this._readableState&&(this._readableState.destroyed=u)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[D]!==!1},set(u){this[D]=!!u}}}),J._fromList=dt;function dt(u,d){if(d.length===0)return null;let B;return d.objectMode?B=d.buffer.shift():!u||u>=d.length?(d.decoder?B=d.buffer.join(""):d.buffer.length===1?B=d.buffer.first():B=d.buffer.concat(d.length),d.buffer.clear()):B=d.buffer.consume(u,d.decoder),B}function nr(u){const d=u._readableState;v("endReadable",d.endEmitted),d.endEmitted||(d.ended=!0,e.nextTick(et,d,u))}function et(u,d){if(v("endReadableNT",u.endEmitted,u.length),!u.errored&&!u.closeEmitted&&!u.endEmitted&&u.length===0){if(u.endEmitted=!0,d.emit("end"),d.writable&&d.allowHalfOpen===!1)e.nextTick(Cn,d);else if(u.autoDestroy){const B=d._writableState;(!B||B.autoDestroy&&(B.finished||B.writable===!1))&&d.destroy()}}}function Cn(u){u.writable&&!u.writableEnded&&!u.destroyed&&u.end()}J.from=function(u,d){return Z(J,u,d)};let ir;function Dr(){return ir===void 0&&(ir={}),ir}return J.fromWeb=function(u,d){return Dr().newStreamReadableFromReadableStream(u,d)},J.toWeb=function(u,d){return Dr().newReadableStreamFromStreamReadable(u,d)},J.wrap=function(u,d){var B,$;return new J({objectMode:(B=($=u.readableObjectMode)!==null&&$!==void 0?$:u.objectMode)!==null&&B!==void 0?B:!0,...d,destroy(q,_e){m.destroyer(u,q),_e(q)}}).wrap(u)},Kn}var Yn,zo;function Hi(){if(zo)return Yn;zo=1;const e=Bt,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:l}=he;Yn=N,N.WritableState=O;const{EventEmitter:g}=Er(),p=Fi.Stream,{Buffer:A}=Dt,E=Qt,{addAbortSignal:x}=bn,{getHighWaterMark:h,getDefaultHighWaterMark:w}=wn,{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:I,ERR_STREAM_DESTROYED:m,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:L,ERR_STREAM_WRITE_AFTER_END:P,ERR_UNKNOWN_ENCODING:F}=Te.codes,{errorOrDestroy:k}=E;s(N.prototype,p.prototype),s(N,p);function j(){}const U=c("kOnFinished");function O(_,S,M){typeof M!="boolean"&&(M=S instanceof lt()),this.objectMode=!!(_&&_.objectMode),M&&(this.objectMode=this.objectMode||!!(_&&_.writableObjectMode)),this.highWaterMark=_?h(this,_,"writableHighWaterMark",M):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const H=!!(_&&_.decodeStrings===!1);this.decodeStrings=!H,this.defaultEncoding=_&&_.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=ee.bind(void 0,S),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!_||_.emitClose!==!1,this.autoDestroy=!_||_.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function Q(_){_.buffered=[],_.bufferedIndex=0,_.allBuffers=!0,_.allNoop=!0}O.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(O.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function N(_){const S=this instanceof lt();if(!S&&!n(N,this))return new N(_);this._writableState=new O(_,this,S),_&&(typeof _.write=="function"&&(this._write=_.write),typeof _.writev=="function"&&(this._writev=_.writev),typeof _.destroy=="function"&&(this._destroy=_.destroy),typeof _.final=="function"&&(this._final=_.final),typeof _.construct=="function"&&(this._construct=_.construct),_.signal&&x(_.signal,this)),p.call(this,_),E.construct(this,()=>{const M=this._writableState;M.writing||te(this,M),Se(this,M)})}i(N,l,{__proto__:null,value:function(_){return n(this,_)?!0:this!==N?!1:_&&_._writableState instanceof O}}),N.prototype.pipe=function(){k(this,new I)};function D(_,S,M,H){const V=_._writableState;if(typeof M=="function")H=M,M=V.defaultEncoding;else{if(!M)M=V.defaultEncoding;else if(M!=="buffer"&&!A.isEncoding(M))throw new F(M);typeof H!="function"&&(H=j)}if(S===null)throw new L;if(!V.objectMode)if(typeof S=="string")V.decodeStrings!==!1&&(S=A.from(S,M),M="buffer");else if(S instanceof A)M="buffer";else if(p._isUint8Array(S))S=p._uint8ArrayToBuffer(S),M="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],S);let oe;return V.ending?oe=new P:V.destroyed&&(oe=new m("write")),oe?(e.nextTick(H,oe),k(_,oe,!0),oe):(V.pendingcb++,z(_,V,S,M,H))}N.prototype.write=function(_,S,M){return D(this,_,S,M)===!0},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){const _=this._writableState;_.corked&&(_.corked--,_.writing||te(this,_))},N.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=a(S)),!A.isEncoding(S))throw new F(S);return this._writableState.defaultEncoding=S,this};function z(_,S,M,H,V){const oe=S.objectMode?1:M.length;S.length+=oe;const ce=S.length<S.highWaterMark;return ce||(S.needDrain=!0),S.writing||S.corked||S.errored||!S.constructed?(S.buffered.push({chunk:M,encoding:H,callback:V}),S.allBuffers&&H!=="buffer"&&(S.allBuffers=!1),S.allNoop&&V!==j&&(S.allNoop=!1)):(S.writelen=oe,S.writecb=V,S.writing=!0,S.sync=!0,_._write(M,H,S.onwrite),S.sync=!1),ce&&!S.errored&&!S.destroyed}function Z(_,S,M,H,V,oe,ce){S.writelen=H,S.writecb=ce,S.writing=!0,S.sync=!0,S.destroyed?S.onwrite(new m("write")):M?_._writev(V,S.onwrite):_._write(V,oe,S.onwrite),S.sync=!1}function Y(_,S,M,H){--S.pendingcb,H(M),W(S),k(_,M)}function ee(_,S){const M=_._writableState,H=M.sync,V=M.writecb;if(typeof V!="function"){k(_,new v);return}M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0,S?(S.stack,M.errored||(M.errored=S),_._readableState&&!_._readableState.errored&&(_._readableState.errored=S),H?e.nextTick(Y,_,M,S,V):Y(_,M,S,V)):(M.buffered.length>M.bufferedIndex&&te(_,M),H?M.afterWriteTickInfo!==null&&M.afterWriteTickInfo.cb===V?M.afterWriteTickInfo.count++:(M.afterWriteTickInfo={count:1,cb:V,stream:_,state:M},e.nextTick(X,M.afterWriteTickInfo)):le(_,M,1,V))}function X({stream:_,state:S,count:M,cb:H}){return S.afterWriteTickInfo=null,le(_,S,M,H)}function le(_,S,M,H){for(!S.ending&&!_.destroyed&&S.length===0&&S.needDrain&&(S.needDrain=!1,_.emit("drain"));M-- >0;)S.pendingcb--,H();S.destroyed&&W(S),Se(_,S)}function W(_){if(_.writing)return;for(let V=_.bufferedIndex;V<_.buffered.length;++V){var S;const{chunk:oe,callback:ce}=_.buffered[V],ne=_.objectMode?1:oe.length;_.length-=ne,ce((S=_.errored)!==null&&S!==void 0?S:new m("write"))}const M=_[U].splice(0);for(let V=0;V<M.length;V++){var H;M[V]((H=_.errored)!==null&&H!==void 0?H:new m("end"))}Q(_)}function te(_,S){if(S.corked||S.bufferProcessing||S.destroyed||!S.constructed)return;const{buffered:M,bufferedIndex:H,objectMode:V}=S,oe=M.length-H;if(!oe)return;let ce=H;if(S.bufferProcessing=!0,oe>1&&_._writev){S.pendingcb-=oe-1;const ne=S.allNoop?j:J=>{for(let ve=ce;ve<M.length;++ve)M[ve].callback(J)},Pe=S.allNoop&&ce===0?M:t(M,ce);Pe.allBuffers=S.allBuffers,Z(_,S,!0,S.length,Pe,"",ne),Q(S)}else{do{const{chunk:ne,encoding:Pe,callback:J}=M[ce];M[ce++]=null;const ve=V?1:ne.length;Z(_,S,!1,ve,ne,Pe,J)}while(ce<M.length&&!S.writing);ce===M.length?Q(S):ce>256?(M.splice(0,ce),S.bufferedIndex=0):S.bufferedIndex=ce}S.bufferProcessing=!1}N.prototype._write=function(_,S,M){if(this._writev)this._writev([{chunk:_,encoding:S}],M);else throw new C("_write()")},N.prototype._writev=null,N.prototype.end=function(_,S,M){const H=this._writableState;typeof _=="function"?(M=_,_=null,S=null):typeof S=="function"&&(M=S,S=null);let V;if(_!=null){const oe=D(this,_,S);oe instanceof r&&(V=oe)}return H.corked&&(H.corked=1,this.uncork()),V||(!H.errored&&!H.ending?(H.ending=!0,Se(this,H,!0),H.ended=!0):H.finished?V=new R("end"):H.destroyed&&(V=new m("end"))),typeof M=="function"&&(V||H.finished?e.nextTick(M,V):H[U].push(M)),this};function ge(_){return _.ending&&!_.destroyed&&_.constructed&&_.length===0&&!_.errored&&_.buffered.length===0&&!_.finished&&!_.writing&&!_.errorEmitted&&!_.closeEmitted}function we(_,S){let M=!1;function H(V){if(M){k(_,V??v());return}if(M=!0,S.pendingcb--,V){const oe=S[U].splice(0);for(let ce=0;ce<oe.length;ce++)oe[ce](V);k(_,V,S.sync)}else ge(S)&&(S.prefinished=!0,_.emit("prefinish"),S.pendingcb++,e.nextTick(Ae,_,S))}S.sync=!0,S.pendingcb++;try{_._final(H)}catch(V){H(V)}S.sync=!1}function ye(_,S){!S.prefinished&&!S.finalCalled&&(typeof _._final=="function"&&!S.destroyed?(S.finalCalled=!0,we(_,S)):(S.prefinished=!0,_.emit("prefinish")))}function Se(_,S,M){ge(S)&&(ye(_,S),S.pendingcb===0&&(M?(S.pendingcb++,e.nextTick((H,V)=>{ge(V)?Ae(H,V):V.pendingcb--},_,S)):ge(S)&&(S.pendingcb++,Ae(_,S))))}function Ae(_,S){S.pendingcb--,S.finished=!0;const M=S[U].splice(0);for(let H=0;H<M.length;H++)M[H]();if(_.emit("finish"),S.autoDestroy){const H=_._readableState;(!H||H.autoDestroy&&(H.endEmitted||H.readable===!1))&&_.destroy()}}o(N.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(_){this._writableState&&(this._writableState.destroyed=_)}},writable:{__proto__:null,get(){const _=this._writableState;return!!_&&_.writable!==!1&&!_.destroyed&&!_.errored&&!_.ending&&!_.ended},set(_){this._writableState&&(this._writableState.writable=!!_)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const _=this._writableState;return _?!_.destroyed&&!_.ending&&_.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const xe=E.destroy;N.prototype.destroy=function(_,S){const M=this._writableState;return!M.destroyed&&(M.bufferedIndex<M.buffered.length||M[U].length)&&e.nextTick(W,M),xe.call(this,_,S),this},N.prototype._undestroy=E.undestroy,N.prototype._destroy=function(_,S){S(_)},N.prototype[g.captureRejectionSymbol]=function(_){this.destroy(_)};let Ue;function Re(){return Ue===void 0&&(Ue={}),Ue}return N.fromWeb=function(_,S){return Re().newStreamWritableFromWritableStream(_,S)},N.toWeb=function(_){return Re().newWritableStreamFromStreamWritable(_)},Yn}var Zn,Go;function qc(){if(Go)return Zn;Go=1;const e=Bt,t=Dt,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:c,isReadableStream:l,isWritableStream:g}=ft,p=_t,{AbortError:A,codes:{ERR_INVALID_ARG_TYPE:E,ERR_INVALID_RETURN_VALUE:x}}=Te,{destroyer:h}=Qt,w=lt(),y=yn(),C=Hi(),{createDeferredPromise:v}=Le,I=pa,m=globalThis.Blob||t.Blob,R=typeof m<"u"?function(O){return O instanceof m}:function(O){return!1},L=globalThis.AbortController||wr().AbortController,{FunctionPrototypeCall:P}=he;class F extends w{constructor(O){super(O),(O==null?void 0:O.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(O==null?void 0:O.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Zn=function U(O,Q){if(c(O))return O;if(s(O))return j({readable:O});if(a(O))return j({writable:O});if(o(O))return j({writable:!1,readable:!1});if(l(O))return j({readable:y.fromWeb(O)});if(g(O))return j({writable:C.fromWeb(O)});if(typeof O=="function"){const{value:D,write:z,final:Z,destroy:Y}=k(O);if(i(D))return I(F,D,{objectMode:!0,write:z,final:Z,destroy:Y});const ee=D==null?void 0:D.then;if(typeof ee=="function"){let X;const le=P(ee,D,W=>{if(W!=null)throw new x("nully","body",W)},W=>{h(X,W)});return X=new F({objectMode:!0,readable:!1,write:z,final(W){Z(async()=>{try{await le,e.nextTick(W,null)}catch(te){e.nextTick(W,te)}})},destroy:Y})}throw new x("Iterable, AsyncIterable or AsyncFunction",Q,D)}if(R(O))return U(O.arrayBuffer());if(i(O))return I(F,O,{objectMode:!0,writable:!1});if(l(O==null?void 0:O.readable)&&g(O==null?void 0:O.writable))return F.fromWeb(O);if(typeof(O==null?void 0:O.writable)=="object"||typeof(O==null?void 0:O.readable)=="object"){const D=O!=null&&O.readable?s(O==null?void 0:O.readable)?O==null?void 0:O.readable:U(O.readable):void 0,z=O!=null&&O.writable?a(O==null?void 0:O.writable)?O==null?void 0:O.writable:U(O.writable):void 0;return j({readable:D,writable:z})}const N=O==null?void 0:O.then;if(typeof N=="function"){let D;return P(N,O,z=>{z!=null&&D.push(z),D.push(null)},z=>{h(D,z)}),D=new F({objectMode:!0,writable:!1,read(){}})}throw new E(Q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],O)};function k(U){let{promise:O,resolve:Q}=v();const N=new L,D=N.signal;return{value:U(async function*(){for(;;){const Z=O;O=null;const{chunk:Y,done:ee,cb:X}=await Z;if(e.nextTick(X),ee)return;if(D.aborted)throw new A(void 0,{cause:D.reason});({promise:O,resolve:Q}=v()),yield Y}}(),{signal:D}),write(Z,Y,ee){const X=Q;Q=null,X({chunk:Z,done:!1,cb:ee})},final(Z){const Y=Q;Q=null,Y({done:!0,cb:Z})},destroy(Z,Y){N.abort(),Y(Z)}}}function j(U){const O=U.readable&&typeof U.readable.read!="function"?y.wrap(U.readable):U.readable,Q=U.writable;let N=!!r(O),D=!!n(Q),z,Z,Y,ee,X;function le(W){const te=ee;ee=null,te?te(W):W&&X.destroy(W)}return X=new F({readableObjectMode:!!(O!=null&&O.readableObjectMode),writableObjectMode:!!(Q!=null&&Q.writableObjectMode),readable:N,writable:D}),D&&(p(Q,W=>{D=!1,W&&h(O,W),le(W)}),X._write=function(W,te,ge){Q.write(W,te)?ge():z=ge},X._final=function(W){Q.end(),Z=W},Q.on("drain",function(){if(z){const W=z;z=null,W()}}),Q.on("finish",function(){if(Z){const W=Z;Z=null,W()}})),N&&(p(O,W=>{N=!1,W&&h(O,W),le(W)}),O.on("readable",function(){if(Y){const W=Y;Y=null,W()}}),O.on("end",function(){X.push(null)}),X._read=function(){for(;;){const W=O.read();if(W===null){Y=X._read;return}if(!X.push(W))return}}),X._destroy=function(W,te){!W&&ee!==null&&(W=new A),Y=null,z=null,Z=null,ee===null?te(W):(ee=te,h(Q,W),h(O,W))},X}return Zn}var Jn,Vo;function lt(){if(Vo)return Jn;Vo=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=he;Jn=s;const i=yn(),o=Hi();n(s.prototype,i.prototype),n(s,i);{const g=r(o.prototype);for(let p=0;p<g.length;p++){const A=g[p];s.prototype[A]||(s.prototype[A]=o.prototype[A])}}function s(g){if(!(this instanceof s))return new s(g);i.call(this,g),o.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});let a;function c(){return a===void 0&&(a={}),a}s.fromWeb=function(g,p){return c().newStreamDuplexFromReadableWritablePair(g,p)},s.toWeb=function(g){return c().newReadableWritablePairFromDuplex(g)};let l;return s.from=function(g){return l||(l=qc()),l(g,"body")},Jn}const{ObjectSetPrototypeOf:ba,Symbol:zc}=he;var wa=ut;const{ERR_METHOD_NOT_IMPLEMENTED:Gc}=Te.codes,qi=lt(),{getHighWaterMark:Vc}=wn;ba(ut.prototype,qi.prototype);ba(ut,qi);const gr=zc("kCallback");function ut(e){if(!(this instanceof ut))return new ut(e);const t=e?Vc(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),qi.call(this,e),this._readableState.sync=!1,this[gr]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Kc)}function Ai(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function Kc(){this._final!==Ai&&Ai.call(this)}ut.prototype._final=Ai;ut.prototype._transform=function(e,t,r){throw new Gc("_transform()")};ut.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[gr]=r})};ut.prototype._read=function(){if(this[gr]){const e=this[gr];this[gr]=null,e()}};const{ObjectSetPrototypeOf:ya}=he;var _a=Yt;const zi=wa;ya(Yt.prototype,zi.prototype);ya(Yt,zi);function Yt(e){if(!(this instanceof Yt))return new Yt(e);zi.call(this,e)}Yt.prototype._transform=function(e,t,r){r(null,e)};const dr=Bt,{ArrayIsArray:Yc,Promise:Zc,SymbolAsyncIterator:Jc,SymbolDispose:Xc}=he,on=_t,{once:Qc}=Le,ef=Qt,Ko=lt(),{aggregateTwoErrors:tf,codes:{ERR_INVALID_ARG_TYPE:Ri,ERR_INVALID_RETURN_VALUE:Xn,ERR_MISSING_ARGS:rf,ERR_STREAM_DESTROYED:nf,ERR_STREAM_PREMATURE_CLOSE:of},AbortError:sf}=Te,{validateFunction:af,validateAbortSignal:lf}=Ar,{isIterable:Rt,isReadable:Qn,isReadableNodeStream:en,isNodeStream:Yo,isTransformStream:Ht,isWebStream:uf,isReadableStream:ei,isReadableFinished:cf}=ft,ff=globalThis.AbortController||wr().AbortController;let ti,ri,ni;function Zo(e,t,r){let n=!1;e.on("close",()=>{n=!0});const i=on(e,{readable:t,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,ef.destroyer(e,o||new nf("pipe")))},cleanup:i}}function df(e){return af(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function ii(e){if(Rt(e))return e;if(en(e))return hf(e);throw new Ri("val",["Readable","Iterable","AsyncIterable"],e)}async function*hf(e){ri||(ri=yn()),yield*ri.prototype[Jc].call(e)}async function Gr(e,t,r,{end:n}){let i,o=null;const s=l=>{if(l&&(i=l),o){const g=o;o=null,g()}},a=()=>new Zc((l,g)=>{i?g(i):o=()=>{i?g(i):l()}});t.on("drain",s);const c=on(t,{readable:!1},s);try{t.writableNeedDrain&&await a();for await(const l of e)t.write(l)||await a();n&&(t.end(),await a()),r()}catch(l){r(i!==l?tf(i,l):l)}finally{c(),t.off("drain",s)}}async function oi(e,t,r,{end:n}){Ht(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function gf(...e){return ma(e,Qc(df(e)))}function ma(e,t,r){if(e.length===1&&Yc(e[0])&&(e=e[0]),e.length<2)throw new rf("streams");const n=new ff,i=n.signal,o=r==null?void 0:r.signal,s=[];lf(o,"options.signal");function a(){x(new sf)}ni=ni||Le.addAbortListener;let c;o&&(c=ni(o,a));let l,g;const p=[];let A=0;function E(C){x(C,--A===0)}function x(C,v){var I;if(C&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=C),!(!l&&!v)){for(;p.length;)p.shift()(l);(I=c)===null||I===void 0||I[Xc](),n.abort(),v&&(l||s.forEach(m=>m()),dr.nextTick(t,l,g))}}let h;for(let C=0;C<e.length;C++){const v=e[C],I=C<e.length-1,m=C>0,R=I||(r==null?void 0:r.end)!==!1,L=C===e.length-1;if(Yo(v)){let P=function(F){F&&F.name!=="AbortError"&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"&&E(F)};if(R){const{destroy:F,cleanup:k}=Zo(v,I,m);p.push(F),Qn(v)&&L&&s.push(k)}v.on("error",P),Qn(v)&&L&&s.push(()=>{v.removeListener("error",P)})}if(C===0)if(typeof v=="function"){if(h=v({signal:i}),!Rt(h))throw new Xn("Iterable, AsyncIterable or Stream","source",h)}else Rt(v)||en(v)||Ht(v)?h=v:h=Ko.from(v);else if(typeof v=="function"){if(Ht(h)){var w;h=ii((w=h)===null||w===void 0?void 0:w.readable)}else h=ii(h);if(h=v(h,{signal:i}),I){if(!Rt(h,!0))throw new Xn("AsyncIterable",`transform[${C-1}]`,h)}else{var y;ti||(ti=_a);const P=new ti({objectMode:!0}),F=(y=h)===null||y===void 0?void 0:y.then;if(typeof F=="function")A++,F.call(h,U=>{g=U,U!=null&&P.write(U),R&&P.end(),dr.nextTick(E)},U=>{P.destroy(U),dr.nextTick(E,U)});else if(Rt(h,!0))A++,Gr(h,P,E,{end:R});else if(ei(h)||Ht(h)){const U=h.readable||h;A++,Gr(U,P,E,{end:R})}else throw new Xn("AsyncIterable or Promise","destination",h);h=P;const{destroy:k,cleanup:j}=Zo(h,!1,!0);p.push(k),L&&s.push(j)}}else if(Yo(v)){if(en(h)){A+=2;const P=pf(h,v,E,{end:R});Qn(v)&&L&&s.push(P)}else if(Ht(h)||ei(h)){const P=h.readable||h;A++,Gr(P,v,E,{end:R})}else if(Rt(h))A++,Gr(h,v,E,{end:R});else throw new Ri("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(uf(v)){if(en(h))A++,oi(ii(h),v,E,{end:R});else if(ei(h)||Rt(h))A++,oi(h,v,E,{end:R});else if(Ht(h))A++,oi(h.readable,v,E,{end:R});else throw new Ri("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=Ko.from(v)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&dr.nextTick(a),h}function pf(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new of)}),e.pipe(t,{end:!1}),n){let o=function(){i=!0,t.end()};cf(e)?dr.nextTick(o):e.once("end",o)}else r();return on(e,{readable:!0,writable:!1},o=>{const s=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",r).once("error",r):r(o)}),on(t,{readable:!1,writable:!0},r)}var Gi={pipelineImpl:ma,pipeline:gf};const{pipeline:bf}=Gi,Vr=lt(),{destroyer:wf}=Qt,{isNodeStream:Kr,isReadable:Jo,isWritable:Xo,isWebStream:si,isTransformStream:At,isWritableStream:Qo,isReadableStream:es}=ft,{AbortError:yf,codes:{ERR_INVALID_ARG_VALUE:ts,ERR_MISSING_ARGS:_f}}=Te,mf=_t;var va=function(...t){if(t.length===0)throw new _f("streams");if(t.length===1)return Vr.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=Vr.from(t[0])),typeof t[t.length-1]=="function"){const E=t.length-1;t[E]=Vr.from(t[E])}for(let E=0;E<t.length;++E)if(!(!Kr(t[E])&&!si(t[E]))){if(E<t.length-1&&!(Jo(t[E])||es(t[E])||At(t[E])))throw new ts(`streams[${E}]`,r[E],"must be readable");if(E>0&&!(Xo(t[E])||Qo(t[E])||At(t[E])))throw new ts(`streams[${E}]`,r[E],"must be writable")}let n,i,o,s,a;function c(E){const x=s;s=null,x?x(E):E?a.destroy(E):!A&&!p&&a.destroy()}const l=t[0],g=bf(t,c),p=!!(Xo(l)||Qo(l)||At(l)),A=!!(Jo(g)||es(g)||At(g));if(a=new Vr({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(g!=null&&g.readableObjectMode),writable:p,readable:A}),p){if(Kr(l))a._write=function(x,h,w){l.write(x,h)?w():n=w},a._final=function(x){l.end(),i=x},l.on("drain",function(){if(n){const x=n;n=null,x()}});else if(si(l)){const h=(At(l)?l.writable:l).getWriter();a._write=async function(w,y,C){try{await h.ready,h.write(w).catch(()=>{}),C()}catch(v){C(v)}},a._final=async function(w){try{await h.ready,h.close().catch(()=>{}),i=w}catch(y){w(y)}}}const E=At(g)?g.readable:g;mf(E,()=>{if(i){const x=i;i=null,x()}})}if(A){if(Kr(g))g.on("readable",function(){if(o){const E=o;o=null,E()}}),g.on("end",function(){a.push(null)}),a._read=function(){for(;;){const E=g.read();if(E===null){o=a._read;return}if(!a.push(E))return}};else if(si(g)){const x=(At(g)?g.readable:g).getReader();a._read=async function(){for(;;)try{const{value:h,done:w}=await x.read();if(!a.push(h))return;if(w){a.push(null);return}}catch{return}}}}return a._destroy=function(E,x){!E&&s!==null&&(E=new yf),o=null,n=null,i=null,s===null?x(E):(s=x,Kr(g)&&wf(g,E))},a};const vf=globalThis.AbortController||wr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Ef,ERR_INVALID_ARG_TYPE:Rr,ERR_MISSING_ARGS:Sf,ERR_OUT_OF_RANGE:Af},AbortError:Je}=Te,{validateAbortSignal:jt,validateInteger:rs,validateObject:kt}=Ar,Rf=he.Symbol("kWeak"),If=he.Symbol("kResistStopPropagation"),{finished:Tf}=_t,xf=va,{addAbortSignalNoValidate:Of}=bn,{isWritable:Nf,isNodeStream:Cf}=ft,{deprecate:Lf}=Le,{ArrayPrototypePush:Pf,Boolean:Mf,MathFloor:ns,Number:Df,NumberIsNaN:Bf,Promise:is,PromiseReject:os,PromiseResolve:$f,PromisePrototypeThen:ss,Symbol:Ea}=he,sn=Ea("kEmpty"),as=Ea("kEof");function jf(e,t){if(t!=null&&kt(t,"options"),(t==null?void 0:t.signal)!=null&&jt(t.signal,"options.signal"),Cf(e)&&!Nf(e))throw new Ef("stream",e,"must be writable");const r=xf(this,e);return t!=null&&t.signal&&Of(t.signal,r),r}function _n(e,t){if(typeof e!="function")throw new Rr("fn",["Function","AsyncFunction"],e);t!=null&&kt(t,"options"),(t==null?void 0:t.signal)!=null&&jt(t.signal,"options.signal");let r=1;(t==null?void 0:t.concurrency)!=null&&(r=ns(t.concurrency));let n=r-1;return(t==null?void 0:t.highWaterMark)!=null&&(n=ns(t.highWaterMark)),rs(r,"options.concurrency",1),rs(n,"options.highWaterMark",0),n+=r,(async function*(){const o=Le.AbortSignalAny([t==null?void 0:t.signal].filter(Mf)),s=this,a=[],c={signal:o};let l,g,p=!1,A=0;function E(){p=!0,x()}function x(){A-=1,h()}function h(){g&&!p&&A<r&&a.length<n&&(g(),g=null)}async function w(){try{for await(let y of s){if(p)return;if(o.aborted)throw new Je;try{if(y=e(y,c),y===sn)continue;y=$f(y)}catch(C){y=os(C)}A+=1,ss(y,x,E),a.push(y),l&&(l(),l=null),!p&&(a.length>=n||A>=r)&&await new is(C=>{g=C})}a.push(as)}catch(y){const C=os(y);ss(C,x,E),a.push(C)}finally{p=!0,l&&(l(),l=null)}}w();try{for(;;){for(;a.length>0;){const y=await a[0];if(y===as)return;if(o.aborted)throw new Je;y!==sn&&(yield y),a.shift(),h()}await new is(y=>{l=y})}}finally{p=!0,g&&(g(),g=null)}}).call(this)}function kf(e=void 0){return e!=null&&kt(e,"options"),(e==null?void 0:e.signal)!=null&&jt(e.signal,"options.signal"),(async function*(){let r=0;for await(const i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Je({cause:e.signal.reason});yield[r++,i]}}).call(this)}async function Sa(e,t=void 0){for await(const r of Vi.call(this,e,t))return!0;return!1}async function Wf(e,t=void 0){if(typeof e!="function")throw new Rr("fn",["Function","AsyncFunction"],e);return!await Sa.call(this,async(...r)=>!await e(...r),t)}async function Uf(e,t){for await(const r of Vi.call(this,e,t))return r}async function Ff(e,t){if(typeof e!="function")throw new Rr("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),sn}for await(const n of _n.call(this,r,t));}function Vi(e,t){if(typeof e!="function")throw new Rr("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:sn}return _n.call(this,r,t)}class Hf extends Sf{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function qf(e,t,r){var n;if(typeof e!="function")throw new Rr("reducer",["Function","AsyncFunction"],e);r!=null&&kt(r,"options"),(r==null?void 0:r.signal)!=null&&jt(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new Je(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Tf(this.destroy(l)),l}const o=new vf,s=o.signal;if(r!=null&&r.signal){const l={once:!0,[Rf]:this,[If]:!0};r.signal.addEventListener("abort",()=>o.abort(),l)}let a=!1;try{for await(const l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new Je;i?t=await e(t,l,{signal:s}):(t=l,i=!0)}if(!a&&!i)throw new Hf}finally{o.abort()}return t}async function zf(e){e!=null&&kt(e,"options"),(e==null?void 0:e.signal)!=null&&jt(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Je(void 0,{cause:e.signal.reason});Pf(t,n)}return t}function Gf(e,t){const r=_n.call(this,e,t);return(async function*(){for await(const i of r)yield*i}).call(this)}function Aa(e){if(e=Df(e),Bf(e))return 0;if(e<0)throw new Af("number",">= 0",e);return e}function Vf(e,t=void 0){return t!=null&&kt(t,"options"),(t==null?void 0:t.signal)!=null&&jt(t.signal,"options.signal"),e=Aa(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Je;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Je;e--<=0&&(yield o)}}).call(this)}function Kf(e,t=void 0){return t!=null&&kt(t,"options"),(t==null?void 0:t.signal)!=null&&jt(t.signal,"options.signal"),e=Aa(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Je;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Je;if(e-- >0&&(yield o),e<=0)return}}).call(this)}ji.streamReturningOperators={asIndexedPairs:Lf(kf,"readable.asIndexedPairs will be removed in a future version."),drop:Vf,filter:Vi,flatMap:Gf,map:_n,take:Kf,compose:jf};ji.promiseReturningOperators={every:Wf,forEach:Ff,reduce:qf,toArray:zf,some:Sa,find:Uf};var ai,ls;function Ra(){if(ls)return ai;ls=1;const{ArrayPrototypePop:e,Promise:t}=he,{isIterable:r,isNodeStream:n,isWebStream:i}=ft,{pipelineImpl:o}=Gi,{finished:s}=_t;Ia();function a(...c){return new t((l,g)=>{let p,A;const E=c[c.length-1];if(E&&typeof E=="object"&&!n(E)&&!r(E)&&!i(E)){const x=e(c);p=x.signal,A=x.end}o(c,(x,h)=>{x?g(x):l(h)},{signal:p,end:A})})}return ai={finished:s,pipeline:a},ai}var us;function Ia(){if(us)return qn.exports;us=1;const{Buffer:e}=Dt,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=he,{promisify:{custom:i}}=Le,{streamReturningOperators:o,promiseReturningOperators:s}=ji,{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Te,c=va,{setDefaultHighWaterMark:l,getDefaultHighWaterMark:g}=wn,{pipeline:p}=Gi,{destroyer:A}=Qt,E=_t,x=Ra(),h=ft,w=qn.exports=Fi.Stream;w.isDestroyed=h.isDestroyed,w.isDisturbed=h.isDisturbed,w.isErrored=h.isErrored,w.isReadable=h.isReadable,w.isWritable=h.isWritable,w.Readable=yn();for(const C of r(o)){let I=function(...m){if(new.target)throw a();return w.Readable.from(n(v,this,m))};const v=o[C];t(I,"name",{__proto__:null,value:v.name}),t(I,"length",{__proto__:null,value:v.length}),t(w.Readable.prototype,C,{__proto__:null,value:I,enumerable:!1,configurable:!0,writable:!0})}for(const C of r(s)){let I=function(...m){if(new.target)throw a();return n(v,this,m)};const v=s[C];t(I,"name",{__proto__:null,value:v.name}),t(I,"length",{__proto__:null,value:v.length}),t(w.Readable.prototype,C,{__proto__:null,value:I,enumerable:!1,configurable:!0,writable:!0})}w.Writable=Hi(),w.Duplex=lt(),w.Transform=wa,w.PassThrough=_a,w.pipeline=p;const{addAbortSignal:y}=bn;return w.addAbortSignal=y,w.finished=E,w.destroy=A,w.compose=c,w.setDefaultHighWaterMark=l,w.getDefaultHighWaterMark=g,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return x}}),t(p,i,{__proto__:null,enumerable:!0,get(){return x.pipeline}}),t(E,i,{__proto__:null,enumerable:!0,get(){return x.finished}}),w.Stream=w,w._isUint8Array=function(v){return v instanceof Uint8Array},w._uint8ArrayToBuffer=function(v){return e.from(v.buffer,v.byteOffset,v.byteLength)},qn.exports}(function(e){const t=Ia(),r=Ra(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(ks);var mn=ks.exports,Ta=yr;yr.default=yr;yr.stable=Na;yr.stableStringify=Na;var an="[...]",xa="[Circular]",Lt=[],xt=[];function Oa(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function yr(e,t,r,n){typeof n>"u"&&(n=Oa()),Ii(e,"",0,[],void 0,0,n);var i;try{xt.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,Ca(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Lt.length!==0;){var o=Lt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Gt(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),Lt.push([n,r,t,i])):xt.push([t,r,e]):(n[r]=e,Lt.push([n,r,t]))}function Ii(e,t,r,n,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<n.length;a++)if(n[a]===e){Gt(xa,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){Gt(an,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Gt(an,e,t,i);return}if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)Ii(e[a],a,a,n,e,o,s);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var l=c[a];Ii(e[l],l,a,n,e,o,s)}}n.pop()}}function Yf(e,t){return e<t?-1:e>t?1:0}function Na(e,t,r,n){typeof n>"u"&&(n=Oa());var i=Ti(e,"",0,[],void 0,0,n)||e,o;try{xt.length===0?o=JSON.stringify(i,t,r):o=JSON.stringify(i,Ca(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Lt.length!==0;){var s=Lt.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function Ti(e,t,r,n,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<n.length;a++)if(n[a]===e){Gt(xa,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){Gt(an,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Gt(an,e,t,i);return}if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)Ti(e[a],a,a,n,e,o,s);else{var c={},l=Object.keys(e).sort(Yf);for(a=0;a<l.length;a++){var g=l[a];Ti(e[g],g,a,n,e,o,s),c[g]=e[g]}if(typeof i<"u")Lt.push([i,t,e]),i[t]=c;else return c}n.pop()}}function Ca(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(xt.length>0)for(var n=0;n<xt.length;n++){var i=xt[n];if(i[1]===t&&i[0]===r){r=i[2],xt.splice(n,1);break}}return e.call(this,t,r)}}const Zf=Xt(Ta);var Ki={exports:{}},Jf=La;function La(e,t){if(e&&t)return La(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}var Pa=Jf;Ki.exports=Pa(tn);Ki.exports.strict=Pa(Ma);tn.proto=tn(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return tn(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Ma(this)},configurable:!0})});function tn(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Ma(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var Yi=Ki.exports;const Xf=Xt(Yi);var Qf=Yi,ed=function(){},td=globalThis.Bare?queueMicrotask:process.nextTick.bind(process),rd=function(e){return e.setHeader&&typeof e.abort=="function"},nd=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Da=function(e,t,r){if(typeof t=="function")return Da(e,null,t);t||(t={}),r=Qf(r||ed);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,a=!1,c=function(){e.writable||l()},l=function(){s=!1,o||r.call(e)},g=function(){o=!1,s||r.call(e)},p=function(w){r.call(e,w?new Error("exited with error code: "+w):null)},A=function(w){r.call(e,w)},E=function(){td(x)},x=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},h=function(){e.req.on("finish",l)};return rd(e)?(e.on("complete",l),e.on("abort",E),e.req?h():e.on("request",h)):s&&!n&&(e.on("end",c),e.on("close",c)),nd(e)&&e.on("exit",p),e.on("end",g),e.on("finish",l),t.error!==!1&&e.on("error",A),e.on("close",E),function(){a=!0,e.removeListener("complete",l),e.removeListener("abort",E),e.removeListener("request",h),e.req&&e.req.removeListener("finish",l),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("exit",p),e.removeListener("end",g),e.removeListener("error",A),e.removeListener("close",E)}},Ba=Da;const cs=Xt(Ba);var id=Yi,od=Ba,rn;try{rn=Wl}catch{}var _r=function(){},sd=typeof process>"u"?!1:/^v?\.0/.test(process.version),vn=function(e){return typeof e=="function"},ad=function(e){return!sd||!rn?!1:(e instanceof(rn.ReadStream||_r)||e instanceof(rn.WriteStream||_r))&&vn(e.close)},ld=function(e){return e.setHeader&&vn(e.abort)},ud=function(e,t,r,n){n=id(n);var i=!1;e.on("close",function(){i=!0}),od(e,{readable:t,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,ad(e))return e.close(_r);if(ld(e))return e.abort();if(vn(e.destroy))return e.destroy();n(s||new Error("stream was destroyed"))}}},fs=function(e){e()},cd=function(e,t){return e.pipe(t)},fd=function(){var e=Array.prototype.slice.call(arguments),t=vn(e[e.length-1]||_r)&&e.pop()||_r;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var s=o<e.length-1,a=o>0;return ud(i,s,a,function(c){r||(r=c),c&&n.forEach(fs),!s&&(n.forEach(fs),t(r))})});return e.reduce(cd)},dd=fd;const ds=Xt(dd);function Yr(){}const hs="SYN",li="ACK",gs="BRK";class ps extends mn.Duplex{constructor(t){let{name:r,target:n,targetWindow:i=window,targetOrigin:o="*"}=t;if(super({objectMode:!0}),K(this,"_init",void 0),K(this,"_haveSyn",void 0),K(this,"_name",void 0),K(this,"_target",void 0),K(this,"_targetWindow",void 0),K(this,"_targetOrigin",void 0),K(this,"_onMessage",void 0),K(this,"_synIntervalId",void 0),!r||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=r,this._target=n,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(gs,null,Yr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(hs,null,Yr),this.cork()}_onData(t){if(!this._init)t===hs?(this._haveSyn=!0,this._write(li,null,Yr)):t===li&&(this._init=!0,this._haveSyn||this._write(li,null,Yr),this.uncork());else if(t===gs)this._break();else try{this.push(t)}catch(r){this.emit("error",r)}}_postMessage(t){const r=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},r)}onMessage(t){const r=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof r!="object"||r.target!==this._name||!r.data||this._onData(r.data)}_read(){}_write(t,r,n){this._postMessage(t),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const hd={rpc:{internal:-32603}},bs={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},ws=hd.rpc.internal,gd="Unspecified error message. This is a bug, please report it.";function $a(e){return Number.isInteger(e)}function ys(e){return typeof e=="string"&&e.length>0}function _s(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function ja(e){const t=e;return!(!t||!$a(t.code)||!ys(t.message)||t.stack&&!ys(t.stack))}function pd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gd;if($a(e)){const r=e.toString();if(Object.hasOwn(bs,r))return bs[r].message}return t}const bd={code:ws,message:pd(ws)};function xi(e){try{JSON.parse(JSON.stringify(e,(t,r)=>{if(t==="__proto__"||t==="constructor")throw new Error("Not valid json");if(typeof r=="function"||typeof r=="symbol")throw new Error("Not valid json");return r}),(t,r)=>{if(!(t==="__proto__"||t==="constructor"))return r})}catch{return!1}return!0}function ms(e){return Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return xi(n)&&(t[r]=n),t},{})}function wd(e){return Array.isArray(e)?e.map(t=>xi(t)?t:_s(t)?ms(t):null):_s(e)?ms(e):xi(e)?e:null}function yd(e,t){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(ja(e))return e;const r=wd(e);return je(je({},t),{},{data:{cause:r}})}function vs(e){let{fallbackError:t=bd,shouldIncludeStack:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ja(t))throw new Error("Must provide fallback error with integer number code and string message.");const n=yd(e,t);return r||delete n.stack,n}function Es(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function _d(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class En extends Fl.EventEmitter{emit(t){let r=t==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r){let c;if(o.length>0&&([c]=o),c instanceof Error)throw c;const l=new Error(`Unhandled error.${c?` (${c.message})`:""}`);throw l.context=c,l}const a=n[t];if(a===void 0)return!1;if(typeof a=="function")Es(a,this,o);else{const c=a.length,l=_d(a);for(let g=0;g<c;g+=1)Es(l[g],this,o)}return!0}}class cr extends Error{constructor(t){let{code:r,message:n,data:i}=t;if(!Number.isInteger(r))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),K(this,"code",void 0),K(this,"data",void 0),this.code=r,i!==void 0&&(this.data=i)}toString(){return Zf({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Oi=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)}};function md(){const e={};function t(){return!1}const r=new En;function n(c){const l=e[c.id];if(!l)throw new Error(`StreamMiddleware - Unknown response id "${c.id}"`);delete e[c.id],Object.assign(l.res,c),setTimeout(l.end)}function i(c){r.emit("notification",c)}function o(c,l,g){let p;try{!c.id?i(c):n(c)}catch(A){p=A}g(p)}const s=new mn.Duplex({objectMode:!0,read:t,write:o});return{events:r,middleware:(c,l,g,p)=>{s.push(c),e[c.id]={req:c,res:l,next:g,end:p}},stream:s}}function vd(){return(e,t,r,n)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,r(s=>{e.id=i,t.id=i,s()})}}class nt extends En{constructor(){super(),K(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,r,n){const i=[];let o=null,s=!1;for(const a of n)if([o,s]=await nt._runMiddleware(t,r,a,i),s)break;return[o,s,i.reverse()]}static _runMiddleware(t,r,n,i){return new Promise(o=>{const s=c=>{const l=c||r.error;l&&(typeof l=="object"&&Object.keys(l).includes("stack")===!1&&(l.stack="Stack trace is not available."),r.error=vs(l,{shouldIncludeStack:!0,fallbackError:{message:(l==null?void 0:l.message)||(l==null?void 0:l.toString()),code:(l==null?void 0:l.code)||-32603,stack:(l==null?void 0:l.stack)||"Stack trace is not available.",data:(l==null?void 0:l.data)||(l==null?void 0:l.message)||(l==null?void 0:l.toString())}})),o([l,!0])},a=c=>{r.error?s(r.error):(c&&(typeof c!="function"&&s(new cr({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(c)),o([null,!1]))};try{n(t,r,a,s)}catch(c){s(c)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,i)=>{r(o=>o?i(o):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new cr({code:-32603,message:"Response has no error or result for request"});if(!n)throw new cr({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,i)=>{try{const[o,s,a]=await nt._runAllMiddleware(t,r,this._middleware);return s?(await nt._runReturnHandlers(a),i(o)):n(async c=>{try{await nt._runReturnHandlers(a)}catch(l){return c(l)}return c()})}catch(o){return i(o)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise((r,n)=>{this._handle(t,(i,o)=>{i&&o===void 0?n(i):r(o)}).catch(n)})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const E=new cr({code:-32603,message:"request must be plain object"});return r(E,{id:void 0,jsonrpc:"2.0",error:E})}if(typeof t.method!="string"){const E=new cr({code:-32603,message:"method must be string"});return r(E,{id:t.id,jsonrpc:"2.0",error:E})}const n=je({},t),i={id:n.id,jsonrpc:n.jsonrpc};let o=null;try{await this._processRequest(n,i)}catch(E){o=E}if(o&&(delete i.result,!i.error)){var s,a,c,l,g,p,A;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),i.error=vs(o,{shouldIncludeStack:!0,fallbackError:{message:((s=o)===null||s===void 0?void 0:s.message)||((a=o)===null||a===void 0?void 0:a.toString()),code:((c=o)===null||c===void 0?void 0:c.code)||-32603,stack:((l=o)===null||l===void 0?void 0:l.stack)||"Stack trace is not available.",data:((g=o)===null||g===void 0?void 0:g.data)||((p=o)===null||p===void 0?void 0:p.message)||((A=o)===null||A===void 0?void 0:A.toString())}})}return r(o,i)}async _processRequest(t,r){const[n,i,o]=await nt._runAllMiddleware(t,r,this._middleware);if(nt._checkForCompletion(t,r,i),await nt._runReturnHandlers(o),n)throw n}}class Ed extends mn.Duplex{constructor(t){let{parent:r,name:n}=t;super({objectMode:!0}),K(this,"_parent",void 0),K(this,"_name",void 0),this._parent=r,this._name=n}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}}const Ss=Symbol("IGNORE_SUBSTREAM");class Sd extends mn.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(je(je({},t),{},{objectMode:!0})),K(this,"_substreams",void 0),K(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const r=new Ed({parent:this,name:t});return this._substreams[t]=r,Ad(this,n=>r.destroy(n||void 0)),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=Ss}_read(){}_write(t,r,n){const{name:i,data:o}=t;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[i];return s?(s!==Ss&&s.push(o),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n())}}function Ad(e,t){const r=Xf(t);cs(e,{readable:!1},r),cs(e,{writable:!1},r)}var ln={exports:{}};ln.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",g="[object Boolean]",p="[object Date]",A="[object Error]",E="[object Function]",x="[object GeneratorFunction]",h="[object Map]",w="[object Number]",y="[object Null]",C="[object Object]",v="[object Proxy]",I="[object RegExp]",m="[object Set]",R="[object String]",L="[object Undefined]",P="[object WeakMap]",F="[object ArrayBuffer]",k="[object DataView]",j="[object Float32Array]",U="[object Float64Array]",O="[object Int8Array]",Q="[object Int16Array]",N="[object Int32Array]",D="[object Uint8Array]",z="[object Uint8ClampedArray]",Z="[object Uint16Array]",Y="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,W={};W[j]=W[U]=W[O]=W[Q]=W[N]=W[D]=W[z]=W[Z]=W[Y]=!0,W[a]=W[c]=W[F]=W[g]=W[k]=W[p]=W[A]=W[E]=W[h]=W[w]=W[C]=W[I]=W[m]=W[R]=W[P]=!1;var te=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,ge=typeof self=="object"&&self&&self.Object===Object&&self,we=te||ge||Function("return this")(),ye=t&&!t.nodeType&&t,Se=ye&&!0&&e&&!e.nodeType&&e,Ae=Se&&Se.exports===ye,xe=Ae&&te.process,Ue=function(){try{var f=Se&&Se.require&&Se.require("util").types;return f||xe&&xe.binding&&xe.binding("util")}catch{}}(),Re=Ue&&Ue.isTypedArray;function _(f,b,T){switch(T.length){case 0:return f.call(b);case 1:return f.call(b,T[0]);case 2:return f.call(b,T[0],T[1]);case 3:return f.call(b,T[0],T[1],T[2])}return f.apply(b,T)}function S(f,b){for(var T=-1,G=Array(f);++T<f;)G[T]=b(T);return G}function M(f){return function(b){return f(b)}}function H(f,b){return f==null?void 0:f[b]}function V(f,b){return function(T){return f(b(T))}}var oe=Array.prototype,ce=Function.prototype,ne=Object.prototype,Pe=we["__core-js_shared__"],J=ce.toString,ve=ne.hasOwnProperty,Wt=function(){var f=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Or=ne.toString,xn=J.call(Object),Nr=RegExp("^"+J.call(ve).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=Ae?we.Buffer:void 0,mt=we.Symbol,tr=we.Uint8Array;Ut&&Ut.allocUnsafe;var vt=V(Object.getPrototypeOf,Object),Cr=Object.create,On=ne.propertyIsEnumerable,Lr=oe.splice,Qe=mt?mt.toStringTag:void 0,Ft=function(){try{var f=Dn(Object,"defineProperty");return f({},"",{}),f}catch{}}(),Nn=Ut?Ut.isBuffer:void 0,rr=Math.max,Pr=Date.now,Mr=Dn(we,"Map"),dt=Dn(Object,"create"),nr=function(){function f(){}return function(b){if(!St(b))return{};if(Cr)return Cr(b);f.prototype=b;var T=new f;return f.prototype=void 0,T}}();function et(f){var b=-1,T=f==null?0:f.length;for(this.clear();++b<T;){var G=f[b];this.set(G[0],G[1])}}function Cn(){this.__data__=dt?dt(null):{},this.size=0}function ir(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Dr(f){var b=this.__data__;if(dt){var T=b[f];return T===n?void 0:T}return ve.call(b,f)?b[f]:void 0}function u(f){var b=this.__data__;return dt?b[f]!==void 0:ve.call(b,f)}function d(f,b){var T=this.__data__;return this.size+=this.has(f)?0:1,T[f]=dt&&b===void 0?n:b,this}et.prototype.clear=Cn,et.prototype.delete=ir,et.prototype.get=Dr,et.prototype.has=u,et.prototype.set=d;function B(f){var b=-1,T=f==null?0:f.length;for(this.clear();++b<T;){var G=f[b];this.set(G[0],G[1])}}function $(){this.__data__=[],this.size=0}function q(f){var b=this.__data__,T=Wr(b,f);if(T<0)return!1;var G=b.length-1;return T==G?b.pop():Lr.call(b,T,1),--this.size,!0}function _e(f){var b=this.__data__,T=Wr(b,f);return T<0?void 0:b[T][1]}function Oe(f){return Wr(this.__data__,f)>-1}function Br(f,b){var T=this.__data__,G=Wr(T,f);return G<0?(++this.size,T.push([f,b])):T[G][1]=b,this}B.prototype.clear=$,B.prototype.delete=q,B.prototype.get=_e,B.prototype.has=Oe,B.prototype.set=Br;function Ne(f){var b=-1,T=f==null?0:f.length;for(this.clear();++b<T;){var G=f[b];this.set(G[0],G[1])}}function $r(){this.size=0,this.__data__={hash:new et,map:new(Mr||B),string:new et}}function Ln(f){var b=Fr(this,f).delete(f);return this.size-=b?1:0,b}function jr(f){return Fr(this,f).get(f)}function kr(f){return Fr(this,f).has(f)}function or(f,b){var T=Fr(this,f),G=T.size;return T.set(f,b),this.size+=T.size==G?0:1,this}Ne.prototype.clear=$r,Ne.prototype.delete=Ln,Ne.prototype.get=jr,Ne.prototype.has=kr,Ne.prototype.set=or;function ze(f){var b=this.__data__=new B(f);this.size=b.size}function sr(){this.__data__=new B,this.size=0}function Et(f){var b=this.__data__,T=b.delete(f);return this.size=b.size,T}function tt(f){return this.__data__.get(f)}function Fe(f){return this.__data__.has(f)}function ol(f,b){var T=this.__data__;if(T instanceof B){var G=T.__data__;if(!Mr||G.length<r-1)return G.push([f,b]),this.size=++T.size,this;T=this.__data__=new Ne(G)}return T.set(f,b),this.size=T.size,this}ze.prototype.clear=sr,ze.prototype.delete=Et,ze.prototype.get=tt,ze.prototype.has=Fe,ze.prototype.set=ol;function sl(f,b){var T=jn(f),G=!T&&$n(f),re=!T&&!G&&ho(f),se=!T&&!G&&!re&&po(f),fe=T||G||re||se,ie=fe?S(f.length,String):[],de=ie.length;for(var He in f)fe&&(He=="length"||re&&(He=="offset"||He=="parent")||se&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||co(He,de))||ie.push(He);return ie}function Pn(f,b,T){(T!==void 0&&!Hr(f[b],T)||T===void 0&&!(b in f))&&Mn(f,b,T)}function al(f,b,T){var G=f[b];(!(ve.call(f,b)&&Hr(G,T))||T===void 0&&!(b in f))&&Mn(f,b,T)}function Wr(f,b){for(var T=f.length;T--;)if(Hr(f[T][0],b))return T;return-1}function Mn(f,b,T){b=="__proto__"&&Ft?Ft(f,b,{configurable:!0,enumerable:!0,value:T,writable:!0}):f[b]=T}var ll=vl();function Ur(f){return f==null?f===void 0?L:y:Qe&&Qe in Object(f)?El(f):xl(f)}function lo(f){return ar(f)&&Ur(f)==a}function ul(f){if(!St(f)||Il(f))return!1;var b=Wn(f)?Nr:X;return b.test(Ll(f))}function cl(f){return ar(f)&&go(f.length)&&!!W[Ur(f)]}function fl(f){if(!St(f))return Tl(f);var b=fo(f),T=[];for(var G in f)G=="constructor"&&(b||!ve.call(f,G))||T.push(G);return T}function uo(f,b,T,G,re){f!==b&&ll(b,function(se,fe){if(re||(re=new ze),St(se))dl(f,b,fe,T,uo,G,re);else{var ie=G?G(Bn(f,fe),se,fe+"",f,b,re):void 0;ie===void 0&&(ie=se),Pn(f,fe,ie)}},bo)}function dl(f,b,T,G,re,se,fe){var ie=Bn(f,T),de=Bn(b,T),He=fe.get(de);if(He){Pn(f,T,He);return}var Me=se?se(ie,de,T+"",f,b,fe):void 0,lr=Me===void 0;if(lr){var Un=jn(de),Fn=!Un&&ho(de),yo=!Un&&!Fn&&po(de);Me=de,Un||Fn||yo?jn(ie)?Me=ie:Pl(ie)?Me=yl(ie):Fn?(lr=!1,Me=pl(de)):yo?(lr=!1,Me=wl(de)):Me=[]:Ml(de)||$n(de)?(Me=ie,$n(ie)?Me=Dl(ie):(!St(ie)||Wn(ie))&&(Me=Sl(de))):lr=!1}lr&&(fe.set(de,Me),re(Me,de,G,se,fe),fe.delete(de)),Pn(f,T,Me)}function hl(f,b){return Nl(Ol(f,b,wo),f+"")}var gl=Ft?function(f,b){return Ft(f,"toString",{configurable:!0,enumerable:!1,value:$l(b),writable:!0})}:wo;function pl(f,b){return f.slice()}function bl(f){var b=new f.constructor(f.byteLength);return new tr(b).set(new tr(f)),b}function wl(f,b){var T=bl(f.buffer);return new f.constructor(T,f.byteOffset,f.length)}function yl(f,b){var T=-1,G=f.length;for(b||(b=Array(G));++T<G;)b[T]=f[T];return b}function _l(f,b,T,G){var re=!T;T||(T={});for(var se=-1,fe=b.length;++se<fe;){var ie=b[se],de=void 0;de===void 0&&(de=f[ie]),re?Mn(T,ie,de):al(T,ie,de)}return T}function ml(f){return hl(function(b,T){var G=-1,re=T.length,se=re>1?T[re-1]:void 0,fe=re>2?T[2]:void 0;for(se=f.length>3&&typeof se=="function"?(re--,se):void 0,fe&&Al(T[0],T[1],fe)&&(se=re<3?void 0:se,re=1),b=Object(b);++G<re;){var ie=T[G];ie&&f(b,ie,G,se)}return b})}function vl(f){return function(b,T,G){for(var re=-1,se=Object(b),fe=G(b),ie=fe.length;ie--;){var de=fe[++re];if(T(se[de],de,se)===!1)break}return b}}function Fr(f,b){var T=f.__data__;return Rl(b)?T[typeof b=="string"?"string":"hash"]:T.map}function Dn(f,b){var T=H(f,b);return ul(T)?T:void 0}function El(f){var b=ve.call(f,Qe),T=f[Qe];try{f[Qe]=void 0;var G=!0}catch{}var re=Or.call(f);return G&&(b?f[Qe]=T:delete f[Qe]),re}function Sl(f){return typeof f.constructor=="function"&&!fo(f)?nr(vt(f)):{}}function co(f,b){var T=typeof f;return b=b??s,!!b&&(T=="number"||T!="symbol"&&le.test(f))&&f>-1&&f%1==0&&f<b}function Al(f,b,T){if(!St(T))return!1;var G=typeof b;return(G=="number"?kn(T)&&co(b,T.length):G=="string"&&b in T)?Hr(T[b],f):!1}function Rl(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function Il(f){return!!Wt&&Wt in f}function fo(f){var b=f&&f.constructor,T=typeof b=="function"&&b.prototype||ne;return f===T}function Tl(f){var b=[];if(f!=null)for(var T in Object(f))b.push(T);return b}function xl(f){return Or.call(f)}function Ol(f,b,T){return b=rr(b===void 0?f.length-1:b,0),function(){for(var G=arguments,re=-1,se=rr(G.length-b,0),fe=Array(se);++re<se;)fe[re]=G[b+re];re=-1;for(var ie=Array(b+1);++re<b;)ie[re]=G[re];return ie[b]=T(fe),_(f,this,ie)}}function Bn(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Nl=Cl(gl);function Cl(f){var b=0,T=0;return function(){var G=Pr(),re=o-(G-T);if(T=G,re>0){if(++b>=i)return arguments[0]}else b=0;return f.apply(void 0,arguments)}}function Ll(f){if(f!=null){try{return J.call(f)}catch{}try{return f+""}catch{}}return""}function Hr(f,b){return f===b||f!==f&&b!==b}var $n=lo(function(){return arguments}())?lo:function(f){return ar(f)&&ve.call(f,"callee")&&!On.call(f,"callee")},jn=Array.isArray;function kn(f){return f!=null&&go(f.length)&&!Wn(f)}function Pl(f){return ar(f)&&kn(f)}var ho=Nn||jl;function Wn(f){if(!St(f))return!1;var b=Ur(f);return b==E||b==x||b==l||b==v}function go(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=s}function St(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function ar(f){return f!=null&&typeof f=="object"}function Ml(f){if(!ar(f)||Ur(f)!=C)return!1;var b=vt(f);if(b===null)return!0;var T=ve.call(b,"constructor")&&b.constructor;return typeof T=="function"&&T instanceof T&&J.call(T)==xn}var po=Re?M(Re):cl;function Dl(f){return _l(f,bo(f))}function bo(f){return kn(f)?sl(f):fl(f)}var Bl=ml(function(f,b,T){uo(f,b,T)});function $l(f){return function(){return f}}function wo(f){return f}function jl(){return!1}e.exports=Bl})(ln,ln.exports);ln.exports;var ka={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(Ul,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(h,w){var y=h[w];if(typeof y.bind=="function")return y.bind(h);try{return Function.prototype.bind.call(y,h)}catch{return function(){return Function.prototype.apply.apply(y,[h,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(h){return h==="debug"&&(h="log"),typeof console===r?!1:h==="trace"&&n?c:console[h]!==void 0?a(console,h):console.log!==void 0?a(console,"log"):t}function g(){for(var h=this.getLevel(),w=0;w<i.length;w++){var y=i[w];this[y]=w<h?t:this.methodFactory(y,h,this.name)}if(this.log=this.debug,typeof console===r&&h<this.levels.SILENT)return"No console available for logging"}function p(h){return function(){typeof console!==r&&(g.call(this),this[h].apply(this,arguments))}}function A(h,w,y){return l(h)||p.apply(this,arguments)}function E(h,w){var y=this,C,v,I,m="loglevel";typeof h=="string"?m+=":"+h:typeof h=="symbol"&&(m=void 0);function R(j){var U=(i[j]||"silent").toUpperCase();if(!(typeof window===r||!m)){try{window.localStorage[m]=U;return}catch{}try{window.document.cookie=encodeURIComponent(m)+"="+U+";"}catch{}}}function L(){var j;if(!(typeof window===r||!m)){try{j=window.localStorage[m]}catch{}if(typeof j===r)try{var U=window.document.cookie,O=encodeURIComponent(m),Q=U.indexOf(O+"=");Q!==-1&&(j=/^([^;]+)/.exec(U.slice(Q+O.length+1))[1])}catch{}return y.levels[j]===void 0&&(j=void 0),j}}function P(){if(!(typeof window===r||!m)){try{window.localStorage.removeItem(m)}catch{}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function F(j){var U=j;if(typeof U=="string"&&y.levels[U.toUpperCase()]!==void 0&&(U=y.levels[U.toUpperCase()]),typeof U=="number"&&U>=0&&U<=y.levels.SILENT)return U;throw new TypeError("log.setLevel() called with invalid level: "+j)}y.name=h,y.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},y.methodFactory=w||A,y.getLevel=function(){return I??v??C},y.setLevel=function(j,U){return I=F(j),U!==!1&&R(I),g.call(y)},y.setDefaultLevel=function(j){v=F(j),L()||y.setLevel(j,!1)},y.resetLevel=function(){I=null,P(),g.call(y)},y.enableAll=function(j){y.setLevel(y.levels.TRACE,j)},y.disableAll=function(j){y.setLevel(y.levels.SILENT,j)},y.rebuild=function(){if(s!==y&&(C=F(s.getLevel())),g.call(y),s===y)for(var j in o)o[j].rebuild()},C=F(s?s.getLevel():"WARN");var k=L();k!=null&&(I=F(k)),g.call(y)}s=new E,s.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var y=o[w];return y||(y=o[w]=new E(w,s.methodFactory)),y};var x=typeof window!==r?window.log:void 0;return s.noConflict=function(){return typeof window!==r&&window.log===s&&(window.log=x),s},s.getLoggers=function(){return o},s.default=s,s})})(ka);var Wa=ka.exports;const un=Xt(Wa),Rd=un.getLogger("http-helpers");Rd.setLevel(Wa.levels.INFO);function As(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Id(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Sn(e,...t){if(!Id(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Td(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");As(e.outputLen),As(e.blockLen)}function cn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xd(e,t){Sn(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const ui=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ci=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ge=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Od(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Zi(e){return typeof e=="string"&&(e=Od(e)),Sn(e),e}function Nd(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Sn(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}class Ua{clone(){return this._cloneInto()}}function Cd(e){const t=n=>e().update(Zi(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Ld(e=32){if(ui&&typeof ui.getRandomValues=="function")return ui.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Pd(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,l=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+l,a,n)}const Md=(e,t,r)=>e&t^~e&r,Dd=(e,t,r)=>e&t^e&r^t&r;class Bd extends Ua{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ci(this.buffer)}update(t){cn(this);const{view:r,buffer:n,blockLen:i}=this;t=Zi(t);const o=t.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const c=ci(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){cn(this),xd(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;Pd(n,i-8,BigInt(this.length*8),o),this.process(n,0);const a=ci(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,g=this.get();if(l>g.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<l;p++)a.setUint32(4*p,g[p],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}}const $d=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ht=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gt=new Uint32Array(64);class jd extends Bd{constructor(){super(64,32,8,!1),this.A=ht[0]|0,this.B=ht[1]|0,this.C=ht[2]|0,this.D=ht[3]|0,this.E=ht[4]|0,this.F=ht[5]|0,this.G=ht[6]|0,this.H=ht[7]|0}get(){const{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let p=0;p<16;p++,r+=4)gt[p]=t.getUint32(r,!1);for(let p=16;p<64;p++){const A=gt[p-15],E=gt[p-2],x=Ge(A,7)^Ge(A,18)^A>>>3,h=Ge(E,17)^Ge(E,19)^E>>>10;gt[p]=h+gt[p-7]+x+gt[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:l,H:g}=this;for(let p=0;p<64;p++){const A=Ge(a,6)^Ge(a,11)^Ge(a,25),E=g+A+Md(a,c,l)+$d[p]+gt[p]|0,h=(Ge(n,2)^Ge(n,13)^Ge(n,22))+Dd(n,i,o)|0;g=l,l=c,c=a,a=s+E|0,s=o,o=i,i=n,n=E+h|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,g=g+this.H|0,this.set(n,i,o,s,a,c,l,g)}roundClean(){gt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const kd=Cd(()=>new jd);class Fa extends Ua{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Td(t);const n=Zi(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return cn(this),this.iHash.update(t),this}digestInto(t){cn(this),Sn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ha=(e,t,r)=>new Fa(e,t).update(r).digest();Ha.create=(e,t)=>new Fa(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wd=BigInt(1),Ud=BigInt(2);function Pt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ir(e){if(!Pt(e))throw new Error("Uint8Array expected")}const Fd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Zt(e){Ir(e);let t="";for(let r=0;r<e.length;r++)t+=Fd[e[r]];return t}function Ji(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const rt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Rs(e){if(e>=rt._0&&e<=rt._9)return e-rt._0;if(e>=rt._A&&e<=rt._F)return e-(rt._A-10);if(e>=rt._a&&e<=rt._f)return e-(rt._a-10)}function mr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const s=Rs(e.charCodeAt(o)),a=Rs(e.charCodeAt(o+1));if(s===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function Ct(e){return Ji(Zt(e))}function Xi(e){return Ir(e),Ji(Zt(Uint8Array.from(e).reverse()))}function Jt(e,t){return mr(e.toString(16).padStart(t*2,"0"))}function Qi(e,t){return Jt(e,t).reverse()}function qe(e,t,r){let n;if(typeof t=="string")try{n=mr(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Pt(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function vr(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Ir(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}const eo=e=>(Ud<<BigInt(e-1))-Wd,fi=e=>new Uint8Array(e),Is=e=>Uint8Array.from(e);function qa(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=fi(e),i=fi(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...p)=>r(i,n,...p),c=(p=fi())=>{i=a(Is([0]),p),n=a(),p.length!==0&&(i=a(Is([1]),p),n=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const A=[];for(;p<t;){n=a();const E=n.slice();A.push(E),p+=n.length}return vr(...A)};return(p,A)=>{s(),c(p);let E;for(;!(E=A(l()));)c();return s(),E}}const Hd={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Pt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Tr(e,t,r={}){const n=(i,o,s)=>{const a=Hd[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}const qd=Object.freeze(Object.defineProperty({__proto__:null,abytes:Ir,bitMask:eo,bytesToHex:Zt,bytesToNumberBE:Ct,bytesToNumberLE:Xi,concatBytes:vr,createHmacDrbg:qa,ensureBytes:qe,hexToBytes:mr,hexToNumber:Ji,isBytes:Pt,numberToBytesBE:Jt,numberToBytesLE:Qi,validateObject:Tr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const me=BigInt(0),pe=BigInt(1),It=BigInt(2),zd=BigInt(3),Ni=BigInt(4),Ts=BigInt(5),xs=BigInt(8);BigInt(9);BigInt(16);function Ce(e,t){const r=e%t;return r>=me?r:t+r}function Gd(e,t,r){if(r<=me||t<me)throw new Error("Expected power/modulo > 0");if(r===pe)return me;let n=pe;for(;t>me;)t&pe&&(n=n*e%r),e=e*e%r,t>>=pe;return n}function De(e,t,r){let n=e;for(;t-- >me;)n*=n,n%=r;return n}function Ci(e,t){if(e===me||t<=me)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ce(e,t),n=t,i=me,o=pe;for(;r!==me;){const a=n/r,c=n%r,l=i-o*a;n=r,r=c,i=o,o=l}if(n!==pe)throw new Error("invert: does not exist");return Ce(i,t)}function Vd(e){const t=(e-pe)/It;let r,n,i;for(r=e-pe,n=0;r%It===me;r/=It,n++);for(i=It;i<e&&Gd(i,t,e)!==e-pe;i++);if(n===1){const s=(e+pe)/Ni;return function(c,l){const g=c.pow(l,s);if(!c.eql(c.sqr(g),l))throw new Error("Cannot find square root");return g}}const o=(r+pe)/It;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,g=a.pow(a.mul(a.ONE,i),r),p=a.pow(c,o),A=a.pow(c,r);for(;!a.eql(A,a.ONE);){if(a.eql(A,a.ZERO))return a.ZERO;let E=1;for(let h=a.sqr(A);E<l&&!a.eql(h,a.ONE);E++)h=a.sqr(h);const x=a.pow(g,pe<<BigInt(l-E-1));g=a.sqr(x),p=a.mul(p,x),A=a.mul(A,g),l=E}return p}}function Kd(e){if(e%Ni===zd){const t=(e+pe)/Ni;return function(n,i){const o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%xs===Ts){const t=(e-Ts)/xs;return function(n,i){const o=n.mul(i,It),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,It),s),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return Vd(e)}const Yd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zd(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Yd.reduce((n,i)=>(n[i]="function",n),t);return Tr(e,r)}function Jd(e,t,r){if(r<me)throw new Error("Expected power > 0");if(r===me)return e.ONE;if(r===pe)return t;let n=e.ONE,i=t;for(;r>me;)r&pe&&(n=e.mul(n,i)),i=e.sqr(i),r>>=pe;return n}function Xd(e,t){const r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function za(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Qd(e,t,r=!1,n={}){if(e<=me)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=za(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Kd(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:eo(i),ZERO:me,ONE:pe,create:c=>Ce(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return me<=c&&c<e},is0:c=>c===me,isOdd:c=>(c&pe)===pe,neg:c=>Ce(-c,e),eql:(c,l)=>c===l,sqr:c=>Ce(c*c,e),add:(c,l)=>Ce(c+l,e),sub:(c,l)=>Ce(c-l,e),mul:(c,l)=>Ce(c*l,e),pow:(c,l)=>Jd(a,c,l),div:(c,l)=>Ce(c*Ci(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Ci(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>Xd(a,c),cmov:(c,l,g)=>g?l:c,toBytes:c=>r?Qi(c,o):Jt(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?Xi(c):Ct(c)}});return Object.freeze(a)}function Ga(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Va(e){const t=Ga(e);return t+Math.ceil(t/2)}function eh(e,t,r=!1){const n=e.length,i=Ga(t),o=Va(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=r?Ct(e):Xi(e),a=Ce(s,t-pe)+pe;return r?Qi(a,i):Jt(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const th=BigInt(0),di=BigInt(1);function rh(e,t){const r=(i,o)=>{const s=o.negate();return i?s:o},n=i=>{const o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>th;)o&di&&(s=s.add(a)),a=a.double(),o>>=di;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=n(o),c=[];let l=i,g=l;for(let p=0;p<s;p++){g=l,c.push(g);for(let A=1;A<a;A++)g=g.add(l),c.push(g);l=g.double()}return c},wNAF(i,o,s){const{windows:a,windowSize:c}=n(i);let l=e.ZERO,g=e.BASE;const p=BigInt(2**i-1),A=2**i,E=BigInt(i);for(let x=0;x<a;x++){const h=x*c;let w=Number(s&p);s>>=E,w>c&&(w-=A,s+=di);const y=h,C=h+Math.abs(w)-1,v=x%2!==0,I=w<0;w===0?g=g.add(r(v,o[y])):l=l.add(r(I,o[C]))}return{p:l,f:g}},wNAFCached(i,o,s,a){const c=i._WINDOW_SIZE||1;let l=o.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&o.set(i,a(l))),this.wNAF(c,l,s)}}}function Ka(e){return Zd(e.Fp),Tr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...za(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nh(e){const t=Ka(e);Tr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:ih,hexToBytes:oh}=qd,Ot={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ot;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ih(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=Ot,r=typeof e=="string"?oh(e):e;Ir(r);let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Ot._parseInt(r.subarray(2)),{d:s,l:a}=Ot._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const g=l.toString(16);return g.length&1?`0${g}`:g},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},it=BigInt(0),$e=BigInt(1);BigInt(2);const Os=BigInt(3);BigInt(4);function sh(e){const t=nh(e),{Fp:r}=t,n=t.toBytes||((x,h,w)=>{const y=h.toAffine();return vr(Uint8Array.from([4]),r.toBytes(y.x),r.toBytes(y.y))}),i=t.fromBytes||(x=>{const h=x.subarray(1),w=r.fromBytes(h.subarray(0,r.BYTES)),y=r.fromBytes(h.subarray(r.BYTES,2*r.BYTES));return{x:w,y}});function o(x){const{a:h,b:w}=t,y=r.sqr(x),C=r.mul(y,x);return r.add(r.add(C,r.mul(x,h)),w)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(x){return typeof x=="bigint"&&it<x&&x<t.n}function a(x){if(!s(x))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(x){const{allowedPrivateKeyLengths:h,nByteLength:w,wrapPrivateKey:y,n:C}=t;if(h&&typeof x!="bigint"){if(Pt(x)&&(x=Zt(x)),typeof x!="string"||!h.includes(x.length))throw new Error("Invalid key");x=x.padStart(w*2,"0")}let v;try{v=typeof x=="bigint"?x:Ct(qe("private key",x,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof x}`)}return y&&(v=Ce(v,C)),a(v),v}const l=new Map;function g(x){if(!(x instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(h,w,y){if(this.px=h,this.py=w,this.pz=y,h==null||!r.isValid(h))throw new Error("x required");if(w==null||!r.isValid(w))throw new Error("y required");if(y==null||!r.isValid(y))throw new Error("z required")}static fromAffine(h){const{x:w,y}=h||{};if(!h||!r.isValid(w)||!r.isValid(y))throw new Error("invalid affine point");if(h instanceof p)throw new Error("projective point not allowed");const C=v=>r.eql(v,r.ZERO);return C(w)&&C(y)?p.ZERO:new p(w,y,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const w=r.invertBatch(h.map(y=>y.pz));return h.map((y,C)=>y.toAffine(w[C])).map(p.fromAffine)}static fromHex(h){const w=p.fromAffine(i(qe("pointHex",h)));return w.assertValidity(),w}static fromPrivateKey(h){return p.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y:w}=this.toAffine();if(!r.isValid(h)||!r.isValid(w))throw new Error("bad point: x or y not FE");const y=r.sqr(w),C=o(h);if(!r.eql(y,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(r.isOdd)return!r.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){g(h);const{px:w,py:y,pz:C}=this,{px:v,py:I,pz:m}=h,R=r.eql(r.mul(w,m),r.mul(v,C)),L=r.eql(r.mul(y,m),r.mul(I,C));return R&&L}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){const{a:h,b:w}=t,y=r.mul(w,Os),{px:C,py:v,pz:I}=this;let m=r.ZERO,R=r.ZERO,L=r.ZERO,P=r.mul(C,C),F=r.mul(v,v),k=r.mul(I,I),j=r.mul(C,v);return j=r.add(j,j),L=r.mul(C,I),L=r.add(L,L),m=r.mul(h,L),R=r.mul(y,k),R=r.add(m,R),m=r.sub(F,R),R=r.add(F,R),R=r.mul(m,R),m=r.mul(j,m),L=r.mul(y,L),k=r.mul(h,k),j=r.sub(P,k),j=r.mul(h,j),j=r.add(j,L),L=r.add(P,P),P=r.add(L,P),P=r.add(P,k),P=r.mul(P,j),R=r.add(R,P),k=r.mul(v,I),k=r.add(k,k),P=r.mul(k,j),m=r.sub(m,P),L=r.mul(k,F),L=r.add(L,L),L=r.add(L,L),new p(m,R,L)}add(h){g(h);const{px:w,py:y,pz:C}=this,{px:v,py:I,pz:m}=h;let R=r.ZERO,L=r.ZERO,P=r.ZERO;const F=t.a,k=r.mul(t.b,Os);let j=r.mul(w,v),U=r.mul(y,I),O=r.mul(C,m),Q=r.add(w,y),N=r.add(v,I);Q=r.mul(Q,N),N=r.add(j,U),Q=r.sub(Q,N),N=r.add(w,C);let D=r.add(v,m);return N=r.mul(N,D),D=r.add(j,O),N=r.sub(N,D),D=r.add(y,C),R=r.add(I,m),D=r.mul(D,R),R=r.add(U,O),D=r.sub(D,R),P=r.mul(F,N),R=r.mul(k,O),P=r.add(R,P),R=r.sub(U,P),P=r.add(U,P),L=r.mul(R,P),U=r.add(j,j),U=r.add(U,j),O=r.mul(F,O),N=r.mul(k,N),U=r.add(U,O),O=r.sub(j,O),O=r.mul(F,O),N=r.add(N,O),j=r.mul(U,N),L=r.add(L,j),j=r.mul(D,N),R=r.mul(Q,R),R=r.sub(R,j),j=r.mul(Q,U),P=r.mul(D,P),P=r.add(P,j),new p(R,L,P)}subtract(h){return this.add(h.negate())}is0(){return this.equals(p.ZERO)}wNAF(h){return E.wNAFCached(this,l,h,w=>{const y=r.invertBatch(w.map(C=>C.pz));return w.map((C,v)=>C.toAffine(y[v])).map(p.fromAffine)})}multiplyUnsafe(h){const w=p.ZERO;if(h===it)return w;if(a(h),h===$e)return this;const{endo:y}=t;if(!y)return E.unsafeLadder(this,h);let{k1neg:C,k1:v,k2neg:I,k2:m}=y.splitScalar(h),R=w,L=w,P=this;for(;v>it||m>it;)v&$e&&(R=R.add(P)),m&$e&&(L=L.add(P)),P=P.double(),v>>=$e,m>>=$e;return C&&(R=R.negate()),I&&(L=L.negate()),L=new p(r.mul(L.px,y.beta),L.py,L.pz),R.add(L)}multiply(h){a(h);let w=h,y,C;const{endo:v}=t;if(v){const{k1neg:I,k1:m,k2neg:R,k2:L}=v.splitScalar(w);let{p:P,f:F}=this.wNAF(m),{p:k,f:j}=this.wNAF(L);P=E.constTimeNegate(I,P),k=E.constTimeNegate(R,k),k=new p(r.mul(k.px,v.beta),k.py,k.pz),y=P.add(k),C=F.add(j)}else{const{p:I,f:m}=this.wNAF(w);y=I,C=m}return p.normalizeZ([y,C])[0]}multiplyAndAddUnsafe(h,w,y){const C=p.BASE,v=(m,R)=>R===it||R===$e||!m.equals(C)?m.multiplyUnsafe(R):m.multiply(R),I=v(this,w).add(v(h,y));return I.is0()?void 0:I}toAffine(h){const{px:w,py:y,pz:C}=this,v=this.is0();h==null&&(h=v?r.ONE:r.inv(C));const I=r.mul(w,h),m=r.mul(y,h),R=r.mul(C,h);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x:I,y:m}}isTorsionFree(){const{h,isTorsionFree:w}=t;if(h===$e)return!0;if(w)return w(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:w}=t;return h===$e?this:w?w(p,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return this.assertValidity(),n(p,this,h)}toHex(h=!0){return Zt(this.toRawBytes(h))}}p.BASE=new p(t.Gx,t.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);const A=t.nBitLength,E=rh(p,t.endo?Math.ceil(A/2):A);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function ah(e){const t=Ka(e);return Tr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function lh(e){const t=ah(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(N){return it<N&&N<r.ORDER}function a(N){return Ce(N,n)}function c(N){return Ci(N,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:g,weierstrassEquation:p,isWithinCurveOrder:A}=sh({...t,toBytes(N,D,z){const Z=D.toAffine(),Y=r.toBytes(Z.x),ee=vr;return z?ee(Uint8Array.from([D.hasEvenY()?2:3]),Y):ee(Uint8Array.from([4]),Y,r.toBytes(Z.y))},fromBytes(N){const D=N.length,z=N[0],Z=N.subarray(1);if(D===i&&(z===2||z===3)){const Y=Ct(Z);if(!s(Y))throw new Error("Point is not on curve");const ee=p(Y);let X;try{X=r.sqrt(ee)}catch(te){const ge=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+ge)}const le=(X&$e)===$e;return(z&1)===1!==le&&(X=r.neg(X)),{x:Y,y:X}}else if(D===o&&z===4){const Y=r.fromBytes(Z.subarray(0,r.BYTES)),ee=r.fromBytes(Z.subarray(r.BYTES,2*r.BYTES));return{x:Y,y:ee}}else throw new Error(`Point of length ${D} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),E=N=>Zt(Jt(N,t.nByteLength));function x(N){const D=n>>$e;return N>D}function h(N){return x(N)?a(-N):N}const w=(N,D,z)=>Ct(N.slice(D,z));class y{constructor(D,z,Z){this.r=D,this.s=z,this.recovery=Z,this.assertValidity()}static fromCompact(D){const z=t.nByteLength;return D=qe("compactSignature",D,z*2),new y(w(D,0,z),w(D,z,2*z))}static fromDER(D){const{r:z,s:Z}=Ot.toSig(qe("DER",D));return new y(z,Z)}assertValidity(){if(!A(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!A(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(D){return new y(this.r,this.s,D)}recoverPublicKey(D){const{r:z,s:Z,recovery:Y}=this,ee=L(qe("msgHash",D));if(Y==null||![0,1,2,3].includes(Y))throw new Error("recovery id invalid");const X=Y===2||Y===3?z+t.n:z;if(X>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const le=Y&1?"03":"02",W=l.fromHex(le+E(X)),te=c(X),ge=a(-ee*te),we=a(Z*te),ye=l.BASE.multiplyAndAddUnsafe(W,ge,we);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return mr(this.toDERHex())}toDERHex(){return Ot.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mr(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const C={isValidPrivateKey(N){try{return g(N),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const N=Va(t.n);return eh(t.randomBytes(N),t.n)},precompute(N=8,D=l.BASE){return D._setWindowSize(N),D.multiply(BigInt(3)),D}};function v(N,D=!0){return l.fromPrivateKey(N).toRawBytes(D)}function I(N){const D=Pt(N),z=typeof N=="string",Z=(D||z)&&N.length;return D?Z===i||Z===o:z?Z===2*i||Z===2*o:N instanceof l}function m(N,D,z=!0){if(I(N))throw new Error("first arg must be private key");if(!I(D))throw new Error("second arg must be public key");return l.fromHex(D).multiply(g(N)).toRawBytes(z)}const R=t.bits2int||function(N){const D=Ct(N),z=N.length*8-t.nBitLength;return z>0?D>>BigInt(z):D},L=t.bits2int_modN||function(N){return a(R(N))},P=eo(t.nBitLength);function F(N){if(typeof N!="bigint")throw new Error("bigint expected");if(!(it<=N&&N<P))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Jt(N,t.nByteLength)}function k(N,D,z=j){if(["recovered","canonical"].some(Ae=>Ae in z))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:Y}=t;let{lowS:ee,prehash:X,extraEntropy:le}=z;ee==null&&(ee=!0),N=qe("msgHash",N),X&&(N=qe("prehashed msgHash",Z(N)));const W=L(N),te=g(D),ge=[F(te),F(W)];if(le!=null&&le!==!1){const Ae=le===!0?Y(r.BYTES):le;ge.push(qe("extraEntropy",Ae))}const we=vr(...ge),ye=W;function Se(Ae){const xe=R(Ae);if(!A(xe))return;const Ue=c(xe),Re=l.BASE.multiply(xe).toAffine(),_=a(Re.x);if(_===it)return;const S=a(Ue*a(ye+_*te));if(S===it)return;let M=(Re.x===_?0:2)|Number(Re.y&$e),H=S;return ee&&x(S)&&(H=h(S),M^=1),new y(_,H,M)}return{seed:we,k2sig:Se}}const j={lowS:t.lowS,prehash:!1},U={lowS:t.lowS,prehash:!1};function O(N,D,z=j){const{seed:Z,k2sig:Y}=k(N,D,z),ee=t;return qa(ee.hash.outputLen,ee.nByteLength,ee.hmac)(Z,Y)}l.BASE._setWindowSize(8);function Q(N,D,z,Z=U){var Re;const Y=N;if(D=qe("msgHash",D),z=qe("publicKey",z),"strict"in Z)throw new Error("options.strict was renamed to lowS");const{lowS:ee,prehash:X}=Z;let le,W;try{if(typeof Y=="string"||Pt(Y))try{le=y.fromDER(Y)}catch(_){if(!(_ instanceof Ot.Err))throw _;le=y.fromCompact(Y)}else if(typeof Y=="object"&&typeof Y.r=="bigint"&&typeof Y.s=="bigint"){const{r:_,s:S}=Y;le=new y(_,S)}else throw new Error("PARSE");W=l.fromHex(z)}catch(_){if(_.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ee&&le.hasHighS())return!1;X&&(D=t.hash(D));const{r:te,s:ge}=le,we=L(D),ye=c(ge),Se=a(we*ye),Ae=a(te*ye),xe=(Re=l.BASE.multiplyAndAddUnsafe(W,Se,Ae))==null?void 0:Re.toAffine();return xe?a(xe.x)===te:!1}return{CURVE:t,getPublicKey:v,getSharedSecret:m,sign:O,verify:Q,ProjectivePoint:l,Signature:y,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uh(e){return{hash:e,hmac:(t,...r)=>Ha(e,t,Nd(...r)),randomBytes:Ld}}function ch(e,t){const r=n=>lh({...e,...uh(n)});return Object.freeze({...r(t),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ya=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ns=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fh=BigInt(1),Li=BigInt(2),Cs=(e,t)=>(e+t/Li)/t;function dh(e){const t=Ya,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,g=l*l*e%t,p=De(g,r,t)*g%t,A=De(p,r,t)*g%t,E=De(A,Li,t)*l%t,x=De(E,i,t)*E%t,h=De(x,o,t)*x%t,w=De(h,a,t)*h%t,y=De(w,c,t)*w%t,C=De(y,a,t)*h%t,v=De(C,r,t)*g%t,I=De(v,s,t)*x%t,m=De(I,n,t)*l%t,R=De(m,Li,t);if(!Pi.eql(Pi.sqr(R),e))throw new Error("Cannot find square root");return R}const Pi=Qd(Ya,void 0,void 0,{sqrt:dh}),to=ch({a:BigInt(0),b:BigInt(7),Fp:Pi,n:Ns,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ns,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-fh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Cs(o*e,t),c=Cs(-n*e,t);let l=Ce(e-a*r-c*i,t),g=Ce(-a*n-c*o,t);const p=l>s,A=g>s;if(p&&(l=t-l),A&&(g=t-g),l>s||g>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:l,k2neg:A,k2:g}}}},kd);BigInt(0);to.ProjectivePoint;function hh(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}BigInt(0);const Mi={},Di={};for(let e=0;e<16;e++){const t=e,r=e*16,n=e.toString(16).toLowerCase();Di[n]=t,Di[n.toUpperCase()]=t,Mi[n]=r,Mi[n.toUpperCase()]=r}function gh(e){const t=e.length,r=new Uint8Array(t/2);for(let n=0;n<t;n+=2)r[n/2]=Mi[e[n]]+Di[e[n+1]];return r}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let e=0;e<=256*256-1;e++)BigInt(e);const An=e=>{if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return gh(t.length%2===0?t:hh(t))},ph=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},xr=e=>{const t=ph(e);return An(t)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");to.CURVE.n;to.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const bh="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";An(bh);const wh="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";An(wh);const yh="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";An(yh);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var Ls;(function(e){e.String="string",e.Bytes="view",e.Number="number"})(Ls||(Ls={}));var Ps;(function(e){e.String="string",e.Bytes="view",e.JSON="json"})(Ps||(Ps={}));var Ms;(function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"})(Ms||(Ms={}));var Ds;(function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"})(Ds||(Ds={}));var Mt;(function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"})(Mt||(Mt={}));xr(Mt.Version);xr(Mt.Balance);xr(Mt.Nonce);xr(Mt.CodeHash);xr(Mt.CodeSize);BigInt(256)**BigInt(31);var _h={exports:{}},ro={},no={};Object.defineProperty(no,"__esModule",{value:!0});function mh(e){var t=4,r=e.length,n=r%t;if(!n)return e;var i=r,o=t-n,s=r+o,a=Buffer.alloc(s);for(a.write(e);o--;)a.write("=",i++);return a.toString()}no.default=mh;Object.defineProperty(ro,"__esModule",{value:!0});var vh=no;function Za(e,t){return t===void 0&&(t="utf8"),Buffer.isBuffer(e)?Bi(e.toString("base64")):Bi(Buffer.from(e,t).toString("base64"))}function Eh(e,t){return t===void 0&&(t="utf8"),Buffer.from(io(e),"base64").toString(t)}function io(e){return e=e.toString(),vh.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Bi(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sh(e){return Buffer.from(io(e),"base64")}var er=Za;er.encode=Za;er.decode=Eh;er.toBase64=io;er.fromBase64=Bi;er.toBuffer=Sh;ro.default=er;(function(e){e.exports=ro.default,e.exports.default=e.exports})(_h);const ue={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},bt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";ue.AQUA+"",bt.SAPPHIRE_MAINNET,ue.CELESTE+"",bt.SAPPHIRE_MAINNET,ue.CYAN+"",bt.SAPPHIRE_MAINNET,ue.MAINNET+"",bt.SAPPHIRE_MAINNET,ue.TESTNET+"",bt.SAPPHIRE_DEVNET;ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";bt.SAPPHIRE_MAINNET+"",bt.SAPPHIRE_DEVNET+"",ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";function Bs(e){let t=!1,r=0,n;try{n=window[e],t=!0,r=n.length;const i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(i){const o=i;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&r!==0}}class Ah{constructor(){K(this,"store",new Map)}getItem(t){return this.store.get(t)||null}setItem(t,r){this.store.set(t,r)}removeItem(t){this.store.delete(t)}}class Rh{constructor(t,r){K(this,"storage",void 0),K(this,"_storeKey",void 0),this.storage=r,this._storeKey=t;try{r.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(t)){let n;r==="local"&&Bs("localStorage")?n=window.localStorage:r==="session"&&Bs("sessionStorage")?n=window.sessionStorage:n=new Ah,this.instanceMap.set(t,new this(t,n))}return this.instanceMap.get(t)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.removeItem(this._storeKey),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,r){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[t]=r,this.storage.setItem(this._storeKey,JSON.stringify(n))}}K(Rh,"instanceMap",new Map);je(je({},bt),ue);class Ih extends Error{}Ih.prototype.name="InvalidTokenError";const Zr={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},ot={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Th={GET_PROVIDER_STATE:"wallet_get_provider_state"},hi={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function xh(e){return function(r,n,i){i(o=>{n.error&&un.warn(`Error in RPC response:
`,n),!r.isTorusInternal&&(un.info(`RPC (${e.origin}):`,r,"->",n),o())})}}var at={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.EthereumProviderError=wt.EthereumRpcError=void 0;const Oh=Ta;class Ja extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Oh.default(this.serialize(),Lh,2)}}wt.EthereumRpcError=Ja;class Nh extends Ja{constructor(t,r,n){if(!Ch(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}wt.EthereumProviderError=Nh;function Ch(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Lh(e,t){if(t!=="[Circular]")return t}var oo={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.errorValues=yt.errorCodes=void 0;yt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};yt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=yt,r=wt,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:s(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(A,E=i){if(Number.isInteger(A)){const x=A.toString();if(p(t.errorValues,x))return t.errorValues[x].message;if(l(A))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return E}e.getMessageFromCode=s;function a(A){if(!Number.isInteger(A))return!1;const E=A.toString();return!!(t.errorValues[E]||l(A))}e.isValidCode=a;function c(A,{fallbackError:E=o,shouldIncludeStack:x=!1}={}){var h,w;if(!E||!Number.isInteger(E.code)||typeof E.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(A instanceof r.EthereumRpcError)return A.serialize();const y={};if(A&&typeof A=="object"&&!Array.isArray(A)&&p(A,"code")&&a(A.code)){const v=A;y.code=v.code,v.message&&typeof v.message=="string"?(y.message=v.message,p(v,"data")&&(y.data=v.data)):(y.message=s(y.code),y.data={originalError:g(A)})}else{y.code=E.code;const v=(h=A)===null||h===void 0?void 0:h.message;y.message=v&&typeof v=="string"?v:E.message,y.data={originalError:g(A)}}const C=(w=A)===null||w===void 0?void 0:w.stack;return x&&A&&C&&typeof C=="string"&&(y.stack=C),y}e.serializeError=c;function l(A){return A>=-32099&&A<=-32e3}function g(A){return A&&typeof A=="object"&&!Array.isArray(A)?Object.assign({},A):A}function p(A,E){return Object.prototype.hasOwnProperty.call(A,E)}})(oo);var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.ethErrors=void 0;const so=wt,Xa=oo,Ie=yt;Rn.ethErrors={rpc:{parse:e=>Be(Ie.errorCodes.rpc.parse,e),invalidRequest:e=>Be(Ie.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Be(Ie.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Be(Ie.errorCodes.rpc.methodNotFound,e),internal:e=>Be(Ie.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Be(t,e)},invalidInput:e=>Be(Ie.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Be(Ie.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Be(Ie.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Be(Ie.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Be(Ie.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Be(Ie.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>fr(Ie.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>fr(Ie.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>fr(Ie.errorCodes.provider.unsupportedMethod,e),disconnected:e=>fr(Ie.errorCodes.provider.disconnected,e),chainDisconnected:e=>fr(Ie.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new so.EthereumProviderError(t,r,n)}}};function Be(e,t){const[r,n]=Qa(t);return new so.EthereumRpcError(e,r||Xa.getMessageFromCode(e),n)}function fr(e,t){const[r,n]=Qa(t);return new so.EthereumProviderError(e,r||Xa.getMessageFromCode(e),n)}function Qa(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=wt;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=oo;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Rn;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=yt;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(at);var Ph=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r};const Mh=Xt(Ph);var Dh="2.1.0";function el(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Bh(e){return el(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function $h(e){return el(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function jh(e){return Bh(e)&&$h(e)}var Ye={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`}};const hg={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak"},kh={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},hr={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},gi={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"},Wh={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var ao={supportedVerifierList:[gi.GOOGLE,gi.REDDIT,gi.DISCORD],translations:Wh,localStorageKeyPrefix:"torus-"},ae=un.getLogger("solana-embed");function Uh(){return(e,t,r)=>{(typeof e.method!="string"||!e.method)&&(t.error=at.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(n=>{const{error:i}=t;return i&&ae.error(`Torus - RPC Error: ${i.message}`,i),n()})}}function Fh(e,t,r){let n=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(n+=`
${t.stack}`),ae.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const Jr=()=>Math.random().toString(36).slice(2),tl=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error";break}return{torusUrl:t,logLevel:r}},Hh=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(ao.translations,t[0])?t[0]:"en",e},qh={height:660,width:375},zh={height:740,width:1315},Gh={height:700,width:1200},rl={height:600,width:400};function Vh(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){const n=r;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function pr(e){let{width:t,height:r}=e;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,a=1,c=Math.abs((o-t)/2/a+n),l=Math.abs((s-r)/2/a+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/a},width=${t/a},top=${l},left=${c}`}class nl extends En{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;if(super(),K(this,"isTorus",void 0),K(this,"_rpcEngine",void 0),K(this,"jsonRpcConnectionEvents",void 0),K(this,"_state",void 0),!jh(t))throw new Error(Ye.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Sd;ds(t,o,t,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const s=md();ds(s.stream,o.createStream(i),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const a=new nt;a.push(vd()),a.push(Uh()),a.push(xh({origin:location.origin})),a.push(s.middleware),this._rpcEngine=a,this.jsonRpcConnectionEvents=s.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw at.ethErrors.rpc.invalidRequest({message:Ye.errors.invalidRequestArgs(),data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw at.ethErrors.rpc.invalidRequest({message:Ye.errors.invalidRequestMethod(),data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw at.ethErrors.rpc.invalidRequest({message:Ye.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:r,params:n},Oi(i,o))})}send(t,r){this._rpcRequest(t,r)}sendAsync(t){return new Promise((r,n)=>{this._rpcRequest(t,Oi(r,n))})}_handleStreamDisconnect(t,r){Fh(t,r,this),this._handleDisconnect(!1,r?r.message:void 0)}}const Vt=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function Xr(e){return e.version===void 0}class il extends En{constructor(t){let{url:r,target:n,features:i,timeout:o=3e4}=t;super(),K(this,"url",void 0),K(this,"target",void 0),K(this,"features",void 0),K(this,"window",void 0),K(this,"windowTimer",void 0),K(this,"iClosedWindow",void 0),K(this,"timeout",void 0),this.url=r,this.target=n||"_blank",this.features=i||pr(Gh),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}class In extends nl{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:i}),K(this,"embedTranslations",void 0),K(this,"torusUrl",void 0),K(this,"dappStorageKey",void 0),K(this,"windowRefs",void 0),K(this,"tryWindowHandle",void 0),K(this,"torusAlertContainer",void 0),K(this,"torusIframe",void 0),this._state=je({},In._defaultState),this.torusUrl="",this.dappStorageKey="";const o=ao.translations[Hh()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const s=a=>{const{method:c,params:l}=a;if(c===Zr.IFRAME_STATUS){const{isFullScreen:g,rid:p}=l;this._displayIframe({isFull:g,rid:p})}else if(c==="create_window"){const{windowId:g,url:p}=l;this._createPopupBlockAlert(g,p)}else if(c===Zr.CLOSE_WINDOW)this._handleCloseWindow(l);else if(c===Zr.USER_LOGGED_IN){const{currentLoginProvider:g}=l;this._state.isLoggedIn=!0,this._state.currentLoginProvider=g}else c===Zr.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",s)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:r,dappStorageKey:n,torusAlertContainer:i,torusIframe:o}=t;this.torusUrl=r,this.dappStorageKey=n,this.torusAlertContainer=i,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:s,isLoggedIn:a}=await this.request({method:ot.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,a)}catch(r){ae.error("Torus: Failed to get initial state. Please report this bug.",r)}finally{ae.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:r,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(r||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const s=new il({url:o,target:n,features:i});if(s.open(),!s.window){this._createPopupBlockAlert(t,o.href);return}this.windowRefs[t]=s,this.request({method:"opened_window",params:{windowId:t}}),s.once("close",()=>{delete this.windowRefs[t],this.request({method:ot.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:r=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(t)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case hr.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case hr.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case hr.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case hr.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=t,this.request({method:ot.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:r}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,r){const n=r,i=t;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,n)}_handleConnect(t,r){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:r}),ae.debug(Ye.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new at.EthereumRpcError(1013,r||Ye.errors.disconnected()),ae.debug(n)):(n=new at.EthereumRpcError(1011,r||Ye.errors.permanentlyDisconnected()),ae.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(t){const{windowId:r}=t;this.windowRefs[r]&&(this.windowRefs[r].close(),delete this.windowRefs[r])}async _createPopupBlockAlert(t,r){const n=this.getLogoUrl(),i=Vt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=Vt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),s=Vt('<div id="torusAlert__btn-container"></div>');s.appendChild(o),i.appendChild(s);const a=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:r,target:"_blank",features:pr(rl)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),a(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}K(In,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Tn extends nl{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:i}),K(this,"chainId",void 0),K(this,"selectedAddress",void 0),K(this,"tryWindowHandle",void 0),this._state=je({},Tn._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=s=>{const{method:a,params:c}=s;a===hi.ACCOUNTS_CHANGED?this._handleAccountsChanged(c):a===hi.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(c):a===hi.CHAIN_CHANGED&&this._handleChainChanged(c)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:r,isUnlocked:n}=await this.request({method:Th.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}catch(t){ae.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{ae.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")i=(s,a)=>{this._handleAccountsChanged(a.result||[],o.method==="solana_accounts",n),r(s,a)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryWindowHandle(o,i)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),ae.debug(Ye.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new at.EthereumRpcError(1013,r||Ye.errors.disconnected()),ae.debug(n)):(n=new at.EthereumRpcError(1011,r||Ye.errors.permanentlyDisconnected()),ae.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(ae.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){ae.error("Torus: Received non-string account. Please report this bug.",t),i=[];break}Mh(this._state.accounts,i)||(r&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&ae.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){ae.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="boolean"){ae.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:r});return}r!==this._state.isUnlocked&&(this._state.isUnlocked=r,this._handleAccountsChanged(t||[]))}}K(Tn,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function $s(e){return new Promise((t,r)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(n){r(n)}})}const Kh=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Yh(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await $s(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),r&&await $s(r.href))?r.href:""}catch{return""}}const Zh=async()=>({name:Kh(window),icon:await Yh(window)}),Jh=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Xh=[ot.SET_PROVIDER],Qh=Vh("localStorage");(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:r}=await tl("production");t.href=`${r}/frame`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){ae.warn(t)}})();class gg{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K(this,"isInitialized",void 0),K(this,"torusAlert",void 0),K(this,"modalZIndex",void 0),K(this,"alertZIndex",void 0),K(this,"requestedLoginProvider",void 0),K(this,"provider",void 0),K(this,"communicationProvider",void 0),K(this,"dappStorageKey",void 0),K(this,"isTopupHidden",!1),K(this,"torusAlertContainer",void 0),K(this,"torusUrl",void 0),K(this,"torusIframe",void 0),K(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=kh.PRODUCTION,enableLogging:r=!1,network:n,showTorusButton:i=!1,useLocalStorage:o=!1,buttonPosition:s=hr.BOTTOM_LEFT,apiKey:a="torus-default",extraParams:c={},whiteLabel:l}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:g,logLevel:p}=await tl(t);ae.enableAll(),ae.info(g,"url loaded"),ae.info(`Solana Embed Version :${Dh}`),this.torusUrl=g,ae.setDefaultLevel(p),r?ae.enableAll():ae.disableAll();const A=this.handleDappStorageKey(o),E=new URL(g);E.pathname.endsWith("/")?E.pathname+="frame":E.pathname+="/frame";const x=new URLSearchParams;return A&&x.append("dappStorageKey",A),x.append("origin",window.location.origin),E.hash=x.toString(),this.torusIframe=Vt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${E.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Vt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Vt(`<link href="${g}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((h,w)=>{try{this.torusIframe.addEventListener("load",async()=>{const y=await Zh();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:a,network:n,dappMetadata:y,extraParams:c,whiteLabel:l},E.origin),await this._setupWeb3({torusUrl:g}),i&&this.showTorusButton(),l!=null&&l.topupHide?this.isTopupHidden=l.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,h()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(y){w(y)}})}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const r=await new Promise((n,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},Oi(n,i))});if(Array.isArray(r)&&r.length>0)return r;throw new Error("Login failed")}catch(r){throw ae.error("login failed",r),r}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:r,userInfo:n}=t,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:r,userInfo:n}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:ot.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(r){return r instanceof Element||r instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:ot.SET_PROVIDER,params:je({},t)})}async showWallet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:ot.WALLET_INSTANCE_ID,params:[]}),i=t?`/${t}`:"",o=new URL(`${this.torusUrl}/wallet${i}`);o.searchParams.append("instanceId",n),Object.keys(r).forEach(a=>{o.searchParams.append(a,r[a])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new il({url:o,features:pr(zh)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:ot.USER_INFO,params:[]})}async initiateTopup(t,r){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=Jr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:ot.TOPUP,params:{provider:t,params:r,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const r=Xr(t),n=r?t.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:r}})}async signAndSendTransaction(t,r){const n=Xr(t),i=n?t.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:r,isLegacyTransaction:n}})}}async signTransaction(t){const r=Xr(t),n=r?t.serializeMessage().toString("hex"):Buffer.from(t.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:r}}),o=JSON.parse(i),s={publicKey:new _o(o.publicKey),signature:Buffer.from(o.signature,"hex")};return t.addSignature(s.publicKey,s.signature),t}async signAllTransactions(t){let r;const n=t.map(s=>(r=Xr(s),r?s.serializeMessage().toString("hex"):Buffer.from(s.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:r}})).map(s=>{const a=JSON.parse(s);return{publicKey:new _o(a.publicKey),signature:Buffer.from(a.signature,"hex")}});return t.forEach((s,a)=>(s.addSignature(o[a].publicKey,o[a].signature),s)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const r=`${ao.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(Qh&&t){const i=window.localStorage.getItem(r);if(i)n=i;else{const o=`torus-app-${Jr()}`;window.localStorage.setItem(r,o),n=o}}return this.dappStorageKey=n,n}async _setupWeb3(t){ae.info("setupWeb3 running");const r=new ps({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new ps({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new Tn(r,{}),o=new In(n,{});i.tryWindowHandle=(l,g)=>{const p=l;if(!Array.isArray(p)&&Jh.includes(p.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const A=Jr();o._handleWindow(A,{target:"_blank",features:pr(rl)}),p.windowId=A}i._rpcEngine.handle(p,g)},o.tryWindowHandle=(l,g)=>{const p=l;if(!Array.isArray(p)&&Xh.includes(p.method)){const A=Jr();o._handleWindow(A,{target:"_blank",features:pr(qh)}),p.params.windowId=A}o._rpcEngine.handle(p,g)};const s=l=>{const g=i[l],p=this;i[l]=function(E,x){const{method:h,params:w=[]}=E;if(h==="solana_requestAccounts"){if(!x)return p.login({loginProvider:w[0]});p.login({loginProvider:w[0]}).then(y=>x(null,y)).catch(y=>x(y))}return g.apply(this,[E,x])}};s("request"),s("sendAsync"),s("send");const a=new Proxy(i,{deleteProperty:()=>!0}),c=new Proxy(o,{deleteProperty:()=>!0});this.provider=a,this.communicationProvider=c,await Promise.all([i._initializeState(),o._initializeState(je(je({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),ae.debug("Torus - injected provider")}}export{hr as BUTTON_POSITION,gi as LOGIN_PROVIDER,hg as PAYMENT_PROVIDER,kh as TORUS_BUILD_ENV,Tn as TorusInPageProvider,gg as default};
